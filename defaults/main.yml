---
# .. vim: foldmarker=[[[,]]]:foldmethod=marker

# Default variables
# =================
#
# .. contents:: Sections
#    :local:
#
# .. include:: includes/all.rst

# Basic options [[[
# -------------

# .. envvar:: packages__mode
#
# In which mode should this role operate. Choices are:
#
# ``deploy``
#   Ensure that all packages are in the desired state on the system as
#   configured by ``packages__deploy_state``.
#
# ``export``
#   Ensure that package lists files are up-to-date.
#   See also the section about :ref:`packages__ref_export`.
#
packages__mode: 'deploy'

# .. ]]]

# Package deploy [[[
# --------------
#
# .. envvar:: packages__deploy_state
#
# In which state should the selected packages be in.
# Note that this option only takes effect in ``deploy`` mode.
# Choices are:
#
# ``present``
#   Ensures that any version of the packages is installed.
#
# ``latest``
#   Ensures that the latest version is installed.
#
# ``build-dep``
#   Ensures the build dependencies of the packages are installed. (Debian-based distributions only).
#
# ``absent``
#   Ensure that the packages are absent.
#
packages__deploy_state: 'present'


# .. envvar:: packages__deploy_purge
#
# Should any configuration files be deleted when removing a package?
packages__deploy_purge: False


# .. envvar:: packages__deploy_force
#
# Whether or not to force package installation/removal.
packages__deploy_force: False


# .. envvar:: packages__deploy_install_recommends
#
# Corresponds to the ``--no-install-recommends`` option for ``apt``.
# Whether or not recommended packages should be installed.
# Set to ``False`` so that we can choose exactly what to install.
packages__deploy_install_recommends: False


# .. envvar:: packages__deploy_update_cache
#
# Should the list of available packages be refreshed by the package manager
# when it is older than the ``packages__deploy_cache_valid_time``?
packages__deploy_update_cache: True


# .. envvar:: packages__deploy_cache_valid_time
#
# If ``packages__deploy_update_cache`` is ``True`` and the last package manager
# refresh is less or equal than ``packages__deploy_cache_valid_time`` seconds ago,
# the ``update_cache`` gets skipped.
packages__deploy_cache_valid_time: '{{ ansible_local.core.cache_valid_time
                                       if (ansible_local|d() and ansible_local.core|d() and
                                           ansible_local.core.cache_valid_time)
                                       else (60 * 60 * 24) }}'


# .. envvar:: packages__deploy_default_release
#
# Corresponds to the ``--target-release`` option for ``apt`` and sets pin
# priorities. By default, this option will not be used.
# Consider using the role debops.apt_preferences_ instead of setting this option.
packages__deploy_default_release: ''


# .. envvar:: packages__deploy_dpkg_options
#
# Corresponds to the ``dpkg_options`` of the APT Ansible module. Check the
# documentation of the module for details.
# By default, this option will not be used.
packages__deploy_dpkg_options: '{{ omit }}'

# .. ]]]

# .. Package list export [[[
# .. _packages__ref_export:
#
# Package list export
# -------------------

# .. envvar:: packages__export_directory
#
# Directory target system where the package lists will be written to in export
# mode.
packages__export_directory: '{{ (ansible_env.HOME
                                if (ansible_env|d() and ansible_env.HOME|d())
                                else "/home/user") + "/.ansible/apt_package_lists" }}'


# .. envvar:: packages__export_classes
#
# Only generated package lists for the following classes.
#
# Examples::
#
#   packages__export_classes:
#     - 'base'
#
packages__export_classes: 'all'


# .. envvar:: packages__export_distributions
#
# Only generated package lists for the following distributions.
# Defaults to Debian stable.
#
# Examples::
#
#   packages__export_distributions:
#
#     - ansible_distribution: 'Debian'
#       ansible_distribution_release: 'jessie'
#
#     - ansible_distribution: 'Ubuntu'
#       ansible_distribution_release: 'trusty'
#
packages__export_distributions:
  - ansible_distribution: 'Debian'
    ansible_distribution_release: 'buster'


# .. envvar:: packages__export_format
#
# Default export format. Choices are:
#
# ``list``
#   Plaintext file containing all package name in separate lines.
#
# ``yaml``
#   YAML file with a list of all packages stored a variable.
#   The name of the variable can be configured via ``packages__export_key_name``.
#
packages__export_format: 'list'


# .. envvar:: packages__export_filename_prepend
#
# String which is used as part of the filename before the class name.
packages__export_filename_prepend: ''


# .. envvar:: packages__export_filename_append
#
# String which is used as part of the filename after the class name.
packages__export_filename_append: ''


# .. envvar:: packages__export_comment
#
# Include the specified header as comment exporting.
packages__export_comment: |
  {{ ansible_managed }}
  It was generated by the Ansible role ypid.packages.
  https://github.com/ypid/ansible-packages
  https://galaxy.ansible.com/ypid/packages/
  {{ ("
  Generated for:
    - " + packages__targets|join("
    - ") + "
  ") if (packages__targets|d([])|length) else "empty" }}
  {{ "You donâ€™t have to use Ansible to get all those packages installed." if (packages__export_format == "yaml") else "empty" }}
  {{ "Have a look at the helper script called gen_install_list_from_yaml:" if (packages__export_format == "yaml") else "empty" }}
  {{ "https://github.com/ypid/ansible-packages/blob/master/scripts/gen_install_list_from_yaml." if (packages__export_format == "yaml") else "empty" }}
  {{ "" }}


# .. envvar:: packages__export_key_name
#
# When exporting in a format which supports named lists, use the given string
# as variable name for the package list.
packages__export_key_name: 'package_list'


# .. envvar:: packages__export_key_absent_name
#
# When exporting in a format which supports named lists, use the given string
# as variable name for the absent package list.
packages__export_key_absent_name: 'package_list_absent'

# .. ]]]

# Package selection [[[
# -----------------

# .. envvar:: packages__host_class
#
# Default host class. Can be overwritten in global, host group or host
# inventory.
# The host class has to be defined in the dictionary ``packages__classes``.
packages__host_class: 'core'


# .. envvar:: packages__contrib_enabled
#
# Should packages from the contrib archive area be included?
# https://www.debian.org/doc/debian-policy/ch-archive.html#s-contrib
packages__contrib_enabled: False


# .. envvar:: packages__non_free_enabled
#
# Should packages from the non-free archive area be included?
# https://www.debian.org/doc/debian-policy/ch-archive.html#s-non-free
packages__non_free_enabled: False


# .. envvar:: packages__load_distribution_vars
#
# Should the distribution specific variables which are bundled with this role
# under :file:`vars/` be loaded?
#
# This mechanism is used to change packages names in case they differ from the
# names in Debian Stable or to remove packages from the list in case they are
# not available in the default repositories.
packages__load_distribution_vars: True


# .. envvar:: packages__load_distribution_backports_vars
#
# Should the distribution release backports specific variables which are
# bundled with this role under :file:`vars/` be loaded?
#
# When this option is set to ``True``, packages which are not included in your
# distribution release about instead are maintained in backports will also be
# considered for being selected.
#
# Note that you must configure your source :manpage:`sources.list(5)` accordingly.
# You should also configure :manpage:`apt_preferences(5)` in case you use other
# releases as well.  But even for backports :manpage:`apt_preferences(5)`
# allows you to enforce which packages should be installed from backports and
# which should be installed from your default release.
#
# Checkout these roles which can do this for you:
#
# * debops.apt_
# * debops.apt_preferences_
#
packages__load_distribution_backports_vars: False


# .. envvar:: packages__load_distribution_release_vars
#
# Should the distribution release specific variables which are bundled with
# this role under :file:`vars/` be loaded?
#
# This option might be useful in case you intend to use most packages from your
# default release (e.g. Debian Stable) but want to install some packages from
# either testing or unstable).
#
# In which case, you will need to set this option to `False` so that packages
# which have been selected and are not available in your default release will
# not be removed from the package list and thus will remain.
#
# Useful in combination with `packages__load_distribution_additional_releases`.
#
# Refer to ``packages__load_distribution_backports_vars`` for details.
packages__load_distribution_release_vars: True


# .. envvar:: packages__load_distribution_additional_releases
#
# Should the additional distribution release specific variables which are
# bundled with this role under :file:`vars/` be loaded?
# Refer to `packages__load_distribution_release_vars` for details.
#
# This list allows you to define additional releases from which packages can be
# installed.
#
# Example::
#
#    packages__load_distribution_additional_releases:
#      - 'stretch'
#      - 'sid'
#
packages__load_distribution_additional_releases: []


# .. envvar:: packages__load_distribution_additional
#
# Should the additional distribution specific variables which are
# bundled with this role under :file:`vars/` be loaded?
# Refer to `packages__load_distribution_release_vars` for details.
#
# This list allows you to define additional distributions from which packages
# can be installed.
#
# Example::
#
#    packages__load_distribution_additional:
#      - 'Linuxmint_qiana'
#
packages__load_distribution_additional: []


# .. envvar:: packages__python2_required_packages
#
# Python 2 will be EOF 2020-01-01. If set to ``False`` then donâ€™t install Python
# 2 packages which are required by other programs/where no Python 3 equivalent
# exists yet.
packages__python2_required_packages: True


# .. envvar:: packages__python2_optional_packages
#
# Python 2 will be EOF 2020-01-01. If set to ``False`` then donâ€™t install Python
# 2 packages which are optional meaning that a Python 3 equivalent already
# exists.
# %s/'\(python-[^ ']\+\)'/'{{ "\1" if (packages__python2_optional_packages|d() | bool) else "" }}'/
packages__python2_optional_packages: '{{ ansible_local.python.installed2
                                         if (ansible_local|d() and ansible_local.python|d() and
                                             ansible_local.python.installed2 is defined)
                                         else False }}'
# .. ]]]

# debconf settings [[[
# ----------------

# .. envvar:: packages__debconf_enabled
#
# Should this role apply settings using :command:`debconf`?
packages__debconf_enabled: True


# .. envvar:: packages__debconf_settings
#
# Global definition list for :command:`debconf`.
#
# ``name``
# Required, string. Name of the package which should be configured via :command:`debconf`.
#
# ``question``
# Optional, string. A :command:`debconf` configuration setting.
#
# ``value``
# Optional, string. Value to set for the ``question``.
#
# ``vtype``
# Optional, string. The type of the value supplied (Choices: ``string``, ``password``,
# ``boolean``, ``select``, ``multiselect``, ``note``, ``error``, ``title``,
# ``text``)
#
# ``when_package``
# Optional, string. Only apply this setting when the package specified by this
# option is marked for installation by this role. This option can be used to
# also set this option when the package for which the setting is intended is
# not explicitly listed but rather implicitly by package dependencies.
# The default is to apply this setting when the package named by the ``name``
# parameter is marked for installation.
#
# Examples::
#
#    packages__debconf_settings:
#      - name: 'wireshark-common'
#        question: 'wireshark-common/install-setuid'
#        value: 'true'
#        vtype: 'boolean'
#        when_package: 'wireshark'
#
packages__debconf_settings: []


# .. envvar:: packages__debconf_group_settings
#
# Host group definition list for :command:`debconf`.
packages__debconf_group_settings: []


# .. envvar:: packages__debconf_host_settings
#
# Host definition list for :command:`debconf`.
packages__debconf_host_settings: []


# .. envvar:: packages__debconf_combined_settings
#
# Combined definition list for :command:`debconf` as it is used by the role.
packages__debconf_combined_settings: |
  {{
    (packages__debconf_settings       | list) +
    (packages__debconf_group_settings | list) +
    (packages__debconf_host_settings  | list) +
    (packages__debconf_role_settings  | list)
  }}


# .. envvar:: packages__debconf_role_settings
#
# Role preset list for :command:`debconf`.
packages__debconf_role_settings:
  - name: 'firmware-ipw2x00'
    question: 'firmware-ipw2x00/license/accepted'
    value: 'true'
    vtype: 'boolean'
    when_package: 'firmware-ipw2x00'
  # - name: 'encfs'
  #   question: 'encfs/security-information'
  #   vtype: 'seen'
  #   when_package: 'encfs'

# .. ]]]

# Single packages [[[
# ---------------

# Default definitions of packages as they are called in Debian stable or if it
# did not yet exist in Debian stable then use the package name from Debian
# testing or unstable in case it has not been released yet.
#
# The variables and there values are pinned when they are first introduced to
# provide backwards compatibility in case some names change in further releases
# of Debian stable. Normally, packages names in this file correspond to Debian
# Stable names.
#
# This feature should be used only when
# :ref:`packages__ref_package_name_remapping` and
# :ref:`packages__ref_black_white_listing` do not cover the use case for
# some reason.
# One such case is specifying packages in
# ``packages__apt_preferences__*`` which can have different names.
#
# Examples::
#
#    packages__single_thunderbird: 'thunderbird'
#    packages__single_thunderbird_l10n: 'thunderbird-l10n-LANG_CODE'
#
# .. ]]]

# .. Package name remapping [[[
# .. _packages__ref_package_name_remapping:
#
# Package name remapping
# ----------------------
#
# As this role supports different distributions packages are sometimes named
# differently. To cover this package names remapping is supported.
#
# In an alpha version of this role, this was implemented by introducing a
# ``packages__single_<package_name>`` variable for each package which had more
# than one name and using it every time where the package was included.
#
# Obviously, this approach does not scale well and would consequently result in
# defending the additional abstraction for each single packages. To avoid this
# package name remapping has being added.

# .. envvar:: packages__name_remapping
#
# Combined dictionary of packages names to remap.
packages__name_remapping: |
  {{
    (packages__name_remapping_by_vars | d({}))
  }}


# .. envvar:: packages__name_remapping_by_vars
#
# Package name remapping by a distribution specification provided by this role
# under :file:`vars/{{ ansible_distribution }}`.
packages__name_remapping_by_vars: {}

# .. ]]]

# .. Package blacklisting/whitelisting [[[
# .. _packages__ref_black_white_listing:
#
# Package blacklisting/whitelisting
# ---------------------------------
#
# Blacklisting/whitelisting of packages regardless of the package class.
# In comparison to ``packages__reject_for_class`` which allows you to reject
# packages only for certain package classes.
# This feature is mainly used internally to implement support for different
# distributions where a set of packages is missing/included compared to Debian.

# .. envvar:: packages__blacklist
#
# Combined blacklisted packages. To blacklist/reject packages for individual
# classes, checkout ``packages__reject_for_class``.
#
# .. note:: Blacklisted packages will be enforced to be absent the same way as
#           rejected packages are, when ``packages__rejected_ensure_absent`` is
#           set to ``True``.
#
packages__blacklist: |
  {{
    (packages__blacklist_global               | list) +
    (packages__blacklist_host_group           | list) +
    (packages__blacklist_host                 | list) +
    (packages__blacklist_by_vars    | d([])   | list)
  }}


# .. envvar:: packages__blacklist_global
#
# Global blacklisted packages.
# This variable is intended to be used in Ansibleâ€™s global inventory.
# More specific variables can overrule less specific variables.
packages__blacklist_global: []


# .. envvar:: packages__blacklist_host_group
#
# Host group blacklisted packages.
# This variable is intended to be used in a host inventory group of Ansible
# (only one host group is supported).
packages__blacklist_host_group: []


# .. envvar:: packages__blacklist_host
#
# Host blacklisted packages.
# This variable is intended to be used in the inventory of the host.
packages__blacklist_host: []


# .. envvar:: packages__blacklist_by_vars
#
# Used internally to blacklist packages from
# :file:`vars/`.
packages__blacklist_by_vars: []


# .. envvar:: packages__blacklist_revoke
#
# Combined packages revoked from the blacklist (selectable again).
# This feature can be used when a package was blacklisted for the release, but
# becomes available again thought backports for example.
packages__blacklist_revoke: |
  {{
    (packages__blacklist_revoke_by_vars | d([]) | list)
  }}


# .. envvar:: packages__blacklisted_ensure_absent
#
# If ``True`` ensure that blacklisted packages are absent. Note that the
# blacklisting feature is also used to filter out packages which are not
# available for the target system.
packages__blacklisted_ensure_absent: False


# .. envvar:: packages__whitelist
#
# Combined whitelisted packages. If this list not empty, only the packages
# listed there can be selected. This feature is rarely used because
# blacklisting is obviously strongly preferred.
#
# This feature has only been implemented to support the Univention Corporate
# Server for which, despite the fact that it is directly based on Debian
# GNU/Linux, only offers a very limited set of packages in there repositories.
packages__whitelist: |
  {{
    (packages__whitelist_global             | list) +
    (packages__whitelist_host_group         | list) +
    (packages__whitelist_host               | list) +
    (packages__whitelist_by_vars    | d([]) | list)
  }}


# .. envvar:: packages__whitelist_global
#
# Global whitelisted packages.
packages__whitelist_global: []


# .. envvar:: packages__whitelist_host_group
#
# Host group whitelisted packages.
packages__whitelist_host_group: []


# .. envvar:: packages__whitelist_host
#
# Host whitelisted packages.
packages__whitelist_host: []


# .. envvar:: packages__whitelist_by_vars
#
# Used internally to blacklist packages from
# :file:`vars/`.
packages__whitelist_by_vars: []

# .. ]]]

# Conditional package selection [[[
# -----------------------------

# .. envvar:: packages__conditional
#
# Allows you to add packages to the selection depending on a set of other
# packages being already selected.
#
# Options:
#
# ``present_packages``
#   Required, string or list of strings of package names which must be selected
#   in order for the ``additional_packages`` to be added to the selection.
#
# ``require``
#   Optional, defaults to ``all``.
#
#   ``number``
#     Number. Specifies that at least ``number`` package defined by
#     ``present_packages`` are needed to add the ``additional_packages`` to the
#     selection.
#
#   ``all``
#     String. Specifies that all packages defined by ``present_packages`` are
#     needed to added the ``additional_packages`` to the selection. (Logical
#     conjunction).
#
packages__conditional: |
  {{
    (packages__conditional_global      | d([]) | list) +
    (packages__conditional_host_group  | d([]) | list) +
    (packages__conditional_host        | d([]) | list) +
    (packages__conditional_role                | list)
  }}

# .. envvar:: packages__conditional_role
#
# Role defaults for :envvar:`packages__conditional`.
packages__conditional_role:

  ## Conditionally add packages on which later conditions are based [[[

  ## Explicitly add the package `gnome-themes-standard` which is specific to Gnome.
  ## Used later to check if a Gnome environment is to be installed.
  - present_packages:
      - 'gnome-core'
      - 'gnome'
      - 'task-gnome-desktop'
    require: 1
    additional_packages:
      - 'gnome-themes-standard'

  ## DKMS [[[

  - present_packages:
      - 'zfs-dkms'
      - 'spl-dkms'
      - 'virtualbox-dkms'
      - 'broadcom-sta-dkms'
    require: 1
    additional_packages:
      - 'dkms'

      ## FIXME: More generic. `linux-headers-generic` is available on Ubuntu.
      - 'linux-headers-amd64'

  ## ]]]

  ## Cinnamon desktop environment [[[
  ## Add package `cinnamon` which is specific to Cinnamon.
  ## Used later to check if a Cinnamon environment is to be installed.
  - present_packages:
      - 'task-cinnamon-desktop'
      - 'cinnamon-desktop-environment'
      - 'cinnamon-common'
      - 'cinnamon-core'
    require: 1
    additional_packages:
      - 'cinnamon-common'
  ## ]]]

  ## Xfce desktop environment [[[
  ## Add package `xfce4-settings` which is specific to Xfce.
  ## Used later to check if an Xfce environment is to be installed.
  - present_packages:
      - 'xfce4'
      - 'task-xfce-desktop'
    require: 1
    additional_packages:
      - 'xfce4-settings'
  ## ]]]

  ## MATE desktop environment [[[
  ## Add package `mate-desktop` which is specific to MATE.
  ## Used later to check if a MATE environment is to be installed.
  - present_packages:
      - 'task-mate-desktop'
      - 'mate-desktop-environment-core'
      - 'mate-desktop-environment'
      - 'mate-desktop-environment-extras'
    require: 1
    additional_packages:
      - 'mate-desktop'
  ## ]]]

  ## LXDE desktop environment [[[
  ## Add package `lxde-common` which is specific to LXDE.
  ## Used later to check if a LXDE environment is to be installed.
  - present_packages:
      - 'task-lxde-desktop'
      - 'lxde'
      - 'lxde-core'
      - 'live-image-lxde-desktop'
    require: 1
    additional_packages:
      - 'lxde-common'
  ## ]]]

  ## Explicitly add the package `xserver-xorg` when packages depending on X11 are
  ## being selected.
  ## Used later to check if a X11 environment is to be installed.
  - present_packages:
      - 'gnome-themes-standard'
      - 'mate-desktop'
      - 'cinnamon-common'
      - 'lxde-common'
      - 'xfce4-settings'
      - 'gdm3'
      - 'lightdm'
    require: 1
    additional_packages:
      - 'xserver-xorg'
      - 'task-desktop'

  ## Documentation packages [[[

  - present_packages:
      - 'git-doc'
      - 'bash'
    additional_packages:
      - 'bash-doc'

  - present_packages:
      - 'git-doc'
      - 'zypper'
    additional_packages:
      - 'zypper-doc'

  - present_packages:
      - 'git-doc'
      - 'perl'
    additional_packages:
      - 'perl-doc'

  - present_packages:
      - 'git-doc'
      - 'debconf-utils'
    additional_packages:
      - 'debconf-doc'

  - present_packages:
      - 'git-doc'
      - 'ansible'
    additional_packages:
      - 'ansible-doc'

  - present_packages:
      - 'git-doc'
      - 'borgbackup'
    additional_packages:
      - 'borgbackup-doc'

  - present_packages:
      - 'git-doc'
      - 'digikam'
    additional_packages:
      - 'digikam-doc'

  - present_packages:
      - 'git-doc'
      - 'shorewall'
    additional_packages:
      - 'shorewall-doc'

  - present_packages:
      - 'git-doc'
      - 'wireshark'
    additional_packages:
      - 'wireshark-doc'

  - present_packages:
      - 'git-doc'
      - 'ant'
    additional_packages:
      - 'ant-doc'

  - present_packages:
      - 'git-doc'
      - 'antlr4'
    additional_packages:
      - 'antlr4-doc'

  - present_packages:
      - 'git-doc'
      - 'imagemagick'
    additional_packages:
      - 'imagemagick-doc'

  - present_packages:
      - 'git-doc'
      - 'sqlite3'
    additional_packages:
      - 'sqlite3-doc'

  - present_packages:
      - 'git-doc'
      - 'golang'
    additional_packages:
      - 'golang-doc'

  ## ]]]

  ## ]]]

  ## Programms [[[
  - present_packages:
      - 'texlive-full'
    additional_packages:
      - 'texlive-latex-base'

  - present_packages:
      - 'pidgin'
      - 'texlive-latex-base'
    require: 2
    additional_packages:
      - 'pidgin-latex'

  - present_packages:
      - 'gedit'
      - 'texlive-latex-base'
    require: 2
    additional_packages:
      - 'gedit-latex-plugin'

  - present_packages:
      - 'xserver-xorg'
    additional_packages: '{{ packages__group_core_bare_metal_xorg
                             if (ansible_virtualization_role in [ "host" ])
                             else [] }}'

  - present_packages:
      - 'xserver-xorg'
    additional_packages: '{{ packages__group_core_hypervisor_guest_tools_gui_kvm }}'

  - present_packages:
      - 'xserver-xorg'
      - 'cups'
    require: 2
    additional_packages:
      - 'system-config-printer'

  - present_packages: '{{ packages__group_kde_applications }}'
    require: 1
    additional_packages:
      ## For https://superuser.com/questions/280880/disable-kde-sounds-in-gnome-ubuntu
      - 'systemsettings'

      ## Based on: task-german-kde-desktop
      ## FIXME: LANG_CODE is not replaced by `de`?
      # - 'kde-l10n-LANG_CODE'

      ## Sorry for this workaround:
      - 'kde-l10n-de'

  - present_packages: 'borgbackup'
    additional_packages:
      - 'python3-llfuse'

  - present_packages:
      - 'owncloud-client'
      - 'nautilus'
    require: 2
    additional_packages:
      - 'nautilus-owncloud'

  - present_packages:
      - 'nextcloud-desktop'
      - 'nautilus'
    require: 2
    additional_packages:
      - 'nautilus-nextcloud'

  - present_packages:
      - 'nextcloud-desktop'
      - 'nemo'
    require: 2
    additional_packages:
      - 'nemo-nextcloud'

  ## Recommended by `battery-stats` and needed for `/usr/share/battery-stats/battery-stats-graph`.
  - present_packages:
      - 'battery-stats'
      - 'xserver-xorg'
    additional_packages:
      - '{{ "python-matplotlib" if (packages__python2_optional_packages|d() | bool) else "" }}'
      - 'libtext-csv-perl'
      - 'gnuplot'
  ## ]]]

  ## Application launcher [[[

  ## Does not include a good launcher.
  - present_packages:
      - 'xfce4-settings'
      - 'mate-desktop'
    require: 1
    additional_packages: '{{ packages__group_application_launcher }}'

  ## ]]]

  ## Gnome desktop environment [[[

  - present_packages:
      - 'gnome-themes-standard'
    additional_packages:
      - 'tint2'

  ## Network manager [[[
  #
  - present_packages:
      - 'gnome-themes-standard'
      - 'network-manager'
    require: 2
    additional_packages:
      - 'network-manager-gnome'

  - present_packages:
      - 'gnome-themes-standard'
      - 'network-manager-iodine'
    require: 2
    additional_packages:
      - 'network-manager-iodine-gnome'

  - present_packages:
      - 'gnome-themes-standard'
      - 'network-manager-openvpn'
    require: 2
    additional_packages:
      - 'network-manager-openvpn-gnome'

  - present_packages:
      - 'gnome-themes-standard'
      - 'network-manager-vpnc'
    require: 2
    additional_packages:
      - 'network-manager-vpnc-gnome'

  - present_packages:
      - 'gnome-themes-standard'
      - 'network-manager-ssh'
    require: 2
    additional_packages:
      - 'network-manager-ssh-gnome'

  - present_packages:
      - 'gnome-themes-standard'
      - 'network-manager-pptp'
    require: 2
    additional_packages:
      - 'network-manager-pptp-gnome'

  - present_packages:
      - 'gnome-themes-standard'
      - 'network-manager-openconnect'
    require: 2
    additional_packages:
      - 'network-manager-openconnect-gnome'
  ## ]]]

  - present_packages:
      - 'gnome-themes-standard'
      - 'libreoffice-writer'
    require: 2
    additional_packages:
      - 'libreoffice-gnome'
  ## ]]]

  ## Xfce desktop environment [[[

  - present_packages:
      - 'xfce4-settings'
      - 'network-manager'
    require: 2
    additional_packages:
      - 'network-manager-gnome'
  ## ]]]

  ## MATE desktop environment [[[

  - present_packages:
      - 'mate-desktop'
      - 'x2goserver'
    additional_packages: 'x2gomatebindings'
  ## ]]]

  ## LXDE desktop environment [[[

  - present_packages:
      - 'lxde-common'
      - 'x2goserver'
    additional_packages: 'x2golxdebindings'
  ## ]]]

# .. ]]]

# Localization support [[[
# --------------------

# .. envvar:: packages__localizations
#
# List of language codes which should be supported.
# English (en-us) is the default and you should not need to specify it.
#
# For Debian, this feature works with a predefined list for packages which
# provide additional localization files in optional packages.
#
# For this to work, you need to provide certain identifiers for the language
# which should be supported:
#
# ``code``
#   Corresponds to a combined string of ISO 639-1 (or ISO 3166-3 if needed) plus ISO 3166-2 (if needed, separated by hyphen).
#   All lower case. Examples: ``en-gb``, ``de-at``
#   Check :file:`/usr/share/i18n/SUPPORTED` for a full list. Note that this file uses underscore instead of a hyphen.
#   You can also check :command:`apt-cache search firefox-esr-l10n` to get the idea.
#
# ``lang_culture``
#   Same as ``code`` except that ISO 3166-2 is not optional.
#   All lower case. Examples: ``en-gb``, ``de-de``
#
# ``name``
#   All lowercase name of the language. Example ``german``.
#
# Example::
#
#    packages__localizations:
#      - code: 'de'
#        culture: 'de-de'
#        name: 'german'
#
packages__localizations: []


# .. envvar:: packages__localizations_available
#
# Definition of available localization packages. The localization packages will
# only be installed when one of the ``present_packages`` is tagged for installation.
#
# Note that this feature is based on the :envvar:`packages__conditional`
# implementation. Check the documentation of it for more details.
#
# The values from each ``packages__localizations`` dict will be substituted with the ``LANG_*`` (example: ``LANG_CODE``) placeholders.
packages__localizations_available: '{{ packages__localizations_available_global + packages__localizations_available_additional_dist }}'


# .. envvar:: packages__localizations_available_global
#
# Default definition optimized for Debian.
packages__localizations_available_global:

  - present_packages: 'firefox-esr'
    ## Bundles the language pack which includes spell checking.
    additional_packages: 'firefox-esr-l10n-LANG_CODE'

  - present_packages: 'chromium'
    additional_packages: 'chromium-l10n'
  - present_packages: 'thunderbird'
    additional_packages: 'thunderbird-l10n-LANG_CODE'
  - present_packages: 'iceowl-extension'
    additional_packages: 'iceowl-l10n-LANG_CODE'
  - present_packages: 'josm'
    additional_packages: 'josm-l10n'

  - present_packages:
      - 'libreoffice'
      - 'libreoffice-writer'
    require: 1
    additional_packages:
      - 'libreoffice-help-LANG_CODE'
      - 'libreoffice-l10n-LANG_CODE'
      - 'mythes-LANG_CODE'
      - 'hyphen-LANG_CODE'
      - 'hunspell-LANG_CULTURE'

  - present_packages: 'vim'
    additional_packages:
      - 'aspell-LANG_CODE'

  - present_packages: 'vim'
    ## Based on: task-german (dependencies and recommended)
    additional_packages:
      - 'task-german'
      - 'wngerman'
      - 'ingerman'
      - 'aspell-de-1901'
    ## Packages seem to be specific to German.
    when: 'de'

  - present_packages: 'kicad'
    ## Based on: task-german-kde-desktop
    additional_packages: 'kicad-doc-LANG_CODE'

  - present_packages: 'cinnamon-common'
    additional_packages: 'cinnamon-l10n'

  - present_packages: 'owncloud-client'
    additional_packages: 'owncloud-client-l10n'


# .. envvar:: packages__localizations_available_additional_dist
#
# Can be used when you only need to extend
# ``packages__localizations_available_global`` but otherwise want to reuse it.
# Used for Ubuntu.
packages__localizations_available_additional_dist: []

# .. ]]]

# Package origin presets for Debian GNU/Linux [[[
# -------------------------------------------
#
# Releases of Debian GNU/Linux usually donâ€™t contain the latest upstream
# versions of software.  This is perfectly fine because the versions which are
# included in releases had some time to stabilize (no new features, only bug
# fixes) and it is less likely that bugs and security vulnerabilities are still
# existent in the released packages.
#
# However, when administrating a system based on Debian stable, users might
# still prefer or need newer versions of software then released with Debian
# Stable itself.
#
# To archive this, there are several options available, listed in order of
# preference starting with the most preferred one:
#
# #. `Debian Backports`_: Backports are packages taken from the next Debian
#    release (called testing), adjusted and recompiled for usage on Debian
#    stable.
#
# #. Debian testing or unstable. Depending on the packages, this might require
#    to upgrade some package dependencies to a newer version as well.
#
# #. Installing software from third-party repositories.
#
# #. Installing software from self build packages. Checkout the
#    debops.reprepro_ role which can get you started.
#
# #. Installing software from source.
#
# Only the first two options are converted by this section. But considering the
# size of the Debian package archive, these two options can get you pretty far.
#
# Note that you might need to enable releases in your ``sources.list(5)``.
# debops.apt_ can do that for you. Also note that when you do that, you will
# need to prevent APT to upgrade all of your packages to the latest version
# available. To do this, you can checkout the ``apt_preferences__preset_list``
# variable of the debops.apt_preferences_ role.
#
# The following lists only contain presets for packages not covered by more
# specific roles. For example the debops.apt_cacher_ng_ role might also set
# APT preferences. This will be configured by this role directly.

# .. envvar:: packages__debian_backports_list
#
# Preset of available `Debian Backports`_.
#
# Note that this also includes packages, which are only available in `Debian
# Backports`_, and where not released with the distribution.
#
# To use it, add the following:
#
# .. code-block:: yaml
#   :linenos:
#
#    apt_preferences__list:
#      - '{{ (packages__apt_preferences__debian_backports_list|d([]) | list) if (ansible_distribution == "Debian") else [] }}'
#
# to your inventory and let debops.apt_preferences_ do the rest.
# Note that debops.apt_preferences_ will need to run in the same context as this role.
packages__apt_preferences__debian_backports_list:

  - package: 'debootstrap'
    backports: [ 'stretch' ]
    state: '{{ packages__apt_preferences__backports_stretch_state | d(packages__apt_preferences__core_backports_state) }}'

  - package: 'borgbackup'
    backports: [ 'stretch' ]
    state: '{{ packages__apt_preferences__backports_borgbackup_state | d(packages__apt_preferences__only_available_backports_state) }}'

  - package: 'intel-microcode'
    backports: [ 'stretch' ]
    state: '{{ "present"
               if (ansible_virtualization_role in [ "host" ] and
                   (packages__apt_preferences__backports_cpu_microcode_state | d(packages__apt_preferences__security_backports_state)) == "present"
                  )
               else "absent" }}'

  - package: 'git-annex'
    backports: [ 'jessie', 'stretch' ]
    state: '{{ packages__apt_preferences__backports_git_annex_state | d(packages__apt_preferences__core_backports_state) }}'

  - package: 'josm josm-* jmapviewer openstreetmap-map-icons-classic'
    backports: [ 'jessie', 'stretch', 'buster' ]
    state: '{{ packages__apt_preferences__backports_josm | d(packages__apt_preferences__client_backports_state) }}'

  - package: 'firejail firejail-*'
    backports: [ 'stretch', 'buster' ]
    state: '{{ packages__apt_preferences__backports_firejail_state | d(packages__apt_preferences__only_available_backports_state) }}'

  - package: 'libreoffice libreoffice-* python3-uno uno-libs3 ure'
    ## Pin definition for buster is more complex?
    backports: [ 'jessie', 'stretch' ]
    state: '{{ packages__apt_preferences__backports_libreoffice_state | d(packages__apt_preferences__client_backports_state) }}'

  - package: 'ansible python-jinja2 python3-jinja2'
    backports: [ 'stretch' ]
    state: '{{ packages__apt_preferences__backports_ansible_state | d(packages__apt_preferences__core_backports_state) }}'

  - package: 'ansible'
    backports: [ 'buster' ]
    state: '{{ packages__apt_preferences__backports_ansible_state | d(packages__apt_preferences__core_backports_state) }}'


# .. envvar:: packages__apt_preferences__security_backports_state
#
# Default state of backports presets which fix security vulnerabilities.
packages__apt_preferences__security_backports_state: 'present'



# .. envvar:: packages__apt_preferences__core_backports_state
#
# Default state of backports presets indented for all systems.
packages__apt_preferences__core_backports_state: '{{ packages__apt_preferences__backports_state }}'


# .. envvar:: packages__apt_preferences__server_backports_state
#
# Default state of backports presets indented for servers.
packages__apt_preferences__server_backports_state: '{{ packages__apt_preferences__backports_state }}'


# .. envvar:: packages__apt_preferences__client_backports_state
#
# Default state of backports presets indented for clients.
packages__apt_preferences__client_backports_state: '{{ packages__apt_preferences__backports_state }}'


# .. envvar:: packages__apt_preferences__only_available_backports_state
#
# Default state of backports presets for packages which are only available from
# backports.
packages__apt_preferences__only_available_backports_state: 'present'


# .. envvar:: packages__apt_preferences__only_usable_backports_state
#
# Default state of backports presets for packages which are usable only from
# backports.
packages__apt_preferences__only_usable_backports_state: 'present'


# .. envvar:: packages__apt_preferences__backports_state
#
# Default state of backports presets.
packages__apt_preferences__backports_state: 'absent'


# .. envvar:: packages__apt_preferences__backports_hplip_state
#
packages__apt_preferences__backports_hplip_state: 'absent'


# .. envvar:: packages__debian_stretch_from_jessie_list
#
# Preset of packages from the Debian Stretch release which can be installed on
# Debian Jessie.
#
# To use it, add the following:
#
# .. code-block:: yaml
#   :linenos:
#
#    apt_preferences__list:
#      - '{{ (packages__debian_stretch_from_jessie_list|d([]) | list) if (ansible_distribution == "Debian") else [] }}'
#
# to your inventory and let debops.apt_preferences_ do the rest.
packages__debian_stretch_from_jessie_list:

  - package: 'tidy libtidy5'
    pin: 'release o=Debian,n=stretch'
    priority: 800
    state: '{{ packages__apt_preferences__unstable_tidy_state | d(packages__apt_preferences__client_unstable_state) }}'

  - package: 'doc-rfc doc-rfc*'
    pin: 'release o=Debian,n=stretch'
    priority: 800
    state: '{{ packages__apt_preferences__unstable_doc_rfc_state | d(packages__apt_preferences__client_unstable_state) }}'

  - package: 'shellcheck'
    pin: 'release o=Debian,n=stretch'
    priority: 800
    state: '{{ packages__apt_preferences__unstable_shellcheck_state | d(packages__apt_preferences__client_unstable_state) }}'

  - package: 'iputils-ping'
    reason: 'Finally handle IPv6 as a first class citizen (all done by the `ping` command).'
    pin: 'release o=Debian,n=stretch'
    priority: 800
    state: '{{ packages__apt_preferences__unstable_shellcheck_state | d(packages__apt_preferences__client_unstable_state) }}'

# Ubuntu
#
# https://askubuntu.com/questions/656794/how-to-install-libreoffice-5-0-in-ubuntu


# .. envvar:: packages__apt_preferences__core_unstable_state
#
# Default state of unstable presets indented for all systems.
packages__apt_preferences__core_unstable_state: '{{ packages__apt_preferences__unstable_state }}'


# .. envvar:: packages__apt_preferences__server_unstable_state
#
# Default state of unstable presets indented for servers.
packages__apt_preferences__server_unstable_state: '{{ packages__apt_preferences__unstable_state }}'


# .. envvar:: packages__apt_preferences__client_unstable_state
#
# Default state of unstable presets indented for clients.
packages__apt_preferences__client_unstable_state: '{{ packages__apt_preferences__unstable_state }}'


# .. envvar:: packages__apt_preferences__unstable_state
#
# Default state of unstable presets.
packages__apt_preferences__unstable_state: 'absent'

# .. ]]]

# Packages groups [[[
# ---------------

# List of applications used to check conditions [[[
# ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

packages__group_kde_applications:
  - 'parley'
  - 'kmplot'
  - 'kcalc'
  - 'kgeography'
  - 'marble'
  - 'kig'
  - 'kmymoney'
  - 'digikam'

# .. ]]]

# Finances [[[
# ~~~~~~~~

packages__group_tag_field_finance_minimum:
  - 'kmymoney'

packages__group_tag_field_finance_bitcoin: []
  # - 'electrum'

packages__group_tag_field_finance_additional:
  - 'aqbanking-tools'
  - 'libaqbanking-doc'

  - 'gnucash'
  - 'gnucash-docs'
  - '{{ "python-gnucash" if (packages__python2_optional_packages|d() | bool) else "" }}'

packages__group_tag_field_finance_full: |
  {{
    packages__group_tag_field_finance_minimum +
    packages__group_tag_field_finance_additional +
    []
  }}

# .. ]]]

# OCR [[[
# ~~~

packages__group_tag_accessibility_ocr:
  - 'tesseract-ocr'
  - 'tesseract-ocr-deu'
  - 'tesseract-ocr-eng'
  - 'gocr'
  - 'ocrad'
  - 'ocrfeeder'

  - '{{ "cuneiform" if (packages__non_free_enabled|d() | bool) else "" }}'

# .. ]]]

# Games [[[
# ~~~~~

packages__group_tag_game:
  - 'supertux'
  - 'minetest'
  # - 'assaultcube'

  - 'bsdgames'
  - 'gnome-games'
  - 'xmoto'

packages__group_tag_game_puzzle:
  - 'knetwalk'

packages__group_tag_game_simulation:
  - 'singularity'
  - 'singularity-music'

packages__group_tag_game_toys:
  - 'cowsay'
  - 'cmatrix'

  - 'figlet'
  - 'sysvbanner'

  - 'geekcode'
  - 'oneko'

  - 'asr-manpages'

  ## Donâ€™t like it ;-)
  # - 'sl'

packages__group_tag_game_toys_nsfw:
  - 'funny-manpages'

# .. ]]]

# Music [[[
# ~~~~~

packages__group_tag_field_arts_audio_guitar:
  - 'rakarrack'
  - 'guitarix'
  - 'tuxguitar'
  - 'gtkguitune'
  - 'songwrite'

packages__group_tag_field_arts_audio:
  - 'hydrogen'
  - 'ardour'
  - 'rosegarden'
  - 'muse'

  ## Unmaintained:
  # - 'freqtweak'

# .. ]]]

# Documentation [[[
# ~~~~~~~~~~~~~

packages__group_tag_role_documentation:
  ## 'git-doc' being selected causes all known docs packages to get installed
  ## conditionally if the main application is installed.
  - 'git-doc'

  - '{{ "apt-doc" if (ansible_pkg_mgr in ["apt"]) else "" }}'
  - 'linux-doc'
  - 'rsyslog-doc'

packages__group_tag_role_documentation_additional:
  - 'doc-rfc'

# .. ]]]

# Imaging [[[
# ~~~~~~~

packages__group_imaging:
  - 'kpartx'
  - 'dcfldd'

  - 'gddrescue'

  ## Superseded by gddrescue
  ## http://danielnoegel.de/wordpress/2010/07/05/datenrettung-mit-ddrescue/
  ## http://gumptravels.blogspot.de/2009/09/ddrescue-ddrescue-gddrescue-gnuddrescue.html
  # - 'ddrescue'
  # - 'myrescue'

  - 'ddrescueview'

  ## WAIT: Not yet packaged: https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=730429
  # - 'ddrutility'

  - 'clonezilla'
  - 'partimage'
  - 'partclone'
  - 'grub-common'

# .. ]]]

# Internet [[[
# ~~~~~~~~

packages__group_internet_minimum:
  - 'firefox-esr'
  - 'chromium'
  - 'chromium-sandbox'
  - 'torbrowser-launcher'


packages__group_email_minimum:
  - 'thunderbird'
  - 'enigmail'
  # - 'xul-ext-sogo-connector'


# https://wiki.debian.org/Flash

packages__group_internet_flash: []
  # - 'browser-plugin-gnash'

  ## `flashplugin-nonfree` is constantly lagging behind.
  ## https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=814316
  # - '{{ "flashplugin-nonfree" if (packages__non_free_enabled|d() | bool) else "" }}'

  # - '{{ "browser-plugin-freshplayer-pepperflash" if (packages__contrib_enabled|d() | bool) else "" }}'

packages__group_internet_additional:
  - 'liferea'

  - 'irssi'
  - 'hexchat'
  - 'mumble'

  # - 'uget'
  - 'webhttrack'
  - 'youtube-dl'

packages__group_internet_full: |
  {{
    packages__group_internet_minimum +
    packages__group_email_minimum +
    packages__group_internet_flash +
    packages__group_internet_additional +
    ([ 'gajim', 'gajim-omemo' ]
    if (
      ansible_distribution|d("") == 'Debian' and
      ansible_distribution_release|d("")|lower != 'jessie'
    ) else []) +
    []
  }}

# .. ]]]

# VOIP [[[
# ~~~~

packages__group_tag_protocol_voip_minimum:
  - 'ring'
  - 'linphone'

# .. ]]]

# Sysadmin [[[
# ~~~~~~~~

# File archiver/packer [[[
# """"""""""""""""""""

packages__group_tag_works_with_archive_minimal:
  - 'unp'
  - 'tar'
  - 'gzip'
  - 'zip'
  - 'unzip'

packages__group_tag_works_with_archive_additional:

  - 'p7zip-full'
  - 'xzdec'
  - 'bzip2'
  - 'ncompress'
  - 'xz-utils'
  - 'lzip'

  - '{{ "p7zip-rar" if (packages__non_free_enabled|d() | bool) else "" }}'
  - '{{ "unrar"     if (packages__non_free_enabled|d() | bool) else "unrar-free" }}'

  ## Used for Firmware files.
  - 'cabextract'

packages__group_tag_works_with_archive_full: |
  {{
    packages__group_tag_works_with_archive_minimal +
    packages__group_tag_works_with_archive_additional +
    []
  }}

# .. ]]]

# Debtags: admin::backup [[[
# """"""""""""""""""""""

# Handled by a separate Ansible role.
packages__group_tag_admin_backup:
  - 'borgbackup'
  - 'borgmatic'

# .. ]]]

# Ansible [[[
# """""""

packages__group_ansible_depends:
  - '{{ "python-crypto" if (packages__python2_optional_packages|d() | bool) else "" }}'
  - '{{ "python-httplib2" if (packages__python2_optional_packages|d() | bool) else "" }}'
  - '{{ "python-jinja2" if (packages__python2_optional_packages|d() | bool) else "" }}'
  - '{{ "python-netaddr" if (packages__python2_optional_packages|d() | bool) else "" }}'
  - '{{ "python-paramiko" if (packages__python2_optional_packages|d() | bool) else "" }}'
  - '{{ "python-pkg-resources" if (packages__python2_optional_packages|d() | bool) else "" }}'
  - '{{ "python-yaml" if (packages__python2_optional_packages|d() | bool) else "" }}'

  ## passlib must be installed to encrypt vars_prompt values.
  - '{{ "python-passlib" if (packages__python2_optional_packages|d() | bool) else "" }}'

  ## Needed for the `dig` lookup.
  - '{{ "python-dnspython" if (packages__python2_optional_packages|d() | bool) else "" }}'

packages__group_ansible_depends_additional:

  ## Additional system information: https://docs.ansible.com/ansible/setup_module.html
  - 'facter'
  - 'ohai'

  - 'sshpass'

packages__group_ansible_depends_full: |
  {{
    packages__group_ansible_depends +
    packages__group_ansible_depends_additional +
    []
  }}

packages__group_ansible:
  - 'ansible'

packages__group_ansible_full: |
  {{
    packages__group_ansible_depends_full +
    packages__group_ansible +
    []
  }}

# .. ]]]

# Debtags: admin::monitoring [[[
# """"""""""""""""""""""""""

packages__group_tag_admin_monitoring_minimum:
  - 'htop'
  - 'iotop'
  - 'fatrace'
  - 'procinfo'
  - 'ncdu'
  - 'sysfsutils'
  - 'sysstat'

packages__group_tag_admin_monitoring_additional:
  - 'nmon'

  ## pcp has replaced the original dstat:
  # - 'dstat'

  ## Needs configuration because it starts daemons by default.
  # - 'pcp'

  - 'strace'
  - 'sysdig'

  - 'logtop'

  ## Include conditionally.
  # - 'goaccess'

  ## https://github.com/lebinh/ngxtop
  ## Not yet packaged for Debian: https://github.com/lebinh/ngxtop/issues/13

packages__group_tag_admin_monitoring_network_minimum:
  - 'nethogs'
  - 'iftop'
  - 'nload'
  - 'ifstat'
  - 'nicstat'
  - 'iptstate'
  - 'conntrack'
  - 'mtr-tiny'

  - 'tcpdump'
  - 'ngrep'
  - 'iptraf-ng'
  ## WAIT: As of buster, speedtest-cli depends on Python2. Other distros like SLES 15 SP1 already updated their packages for Python3 only support.
  - '{{ "speedtest-cli" if (packages__python2_optional_packages|d()|bool or ansible_distribution|d("") != "Debian") else "" }}'

packages__group_tag_admin_monitoring_network_additional:
  - 'wireshark'
  - 'lua-cjson-dev'
  - 'tshark'
  - 'geoip-bin'
  - '{{ "" if (packages__contrib_enabled|d() | bool) else "geoip-database-extra" }}'

packages__group_tag_admin_monitoring_network_extra:
  - '{{ "geoip-database-contrib" if (packages__contrib_enabled|d() | bool) else "geoip-database" }}'

packages__group_tag_admin_monitoring_basic: |
  {{
    packages__group_tag_admin_monitoring_minimum +
    packages__group_tag_admin_monitoring_network_minimum +
    []
  }}

packages__group_tag_admin_monitoring_full: |
  {{
    packages__group_tag_admin_monitoring_minimum +
    packages__group_tag_admin_monitoring_basic +
    packages__group_tag_admin_monitoring_additional +
    packages__group_tag_admin_monitoring_network_minimum +
    packages__group_tag_admin_monitoring_network_additional +
    []
  }}

# .. ]]]

# Network [[[
# """""""

packages__group_networking_analysis_minimum:
  - 'packeth'
  - 'hping3'
  # - 'bing'
  - 'httpie'

  - 'nmap'
  - 'zenmap'
  - '{{ "python-nmap" if (packages__python2_optional_packages|d() | bool) else "" }}'
  - 'python3-nmap'
  - 'xsltproc'

  - 'tftp'

  - 'dhcping'
  - 'dhcpdump'
  - 'dnstop'
  - 'dnstracer'
  - 'netdiscover'
  - 'tcpreplay'
  - 'tcpflow'

  - '{{ "python-scapy" if (packages__python2_optional_packages|d() | bool) else "" }}'

  - 'snmp'
  - '{{ "snmp-mibs-downloader" if (packages__non_free_enabled|d() | bool) else "" }}'
  - 'tkmib'

  ## Not in Debian.
  # - 'snmpb'

packages__group_network_address_calculation:
  - 'netmask'
  - 'ipcalc'
  - 'sipcalc'
  - 'subnetcalc'
  - 'ipv6calc'
  - 'gip'

packages__group_tag_network_firewall:
  - 'iptables'
  - 'ipset'
  - 'fwbuilder'

# .. ]]]

# Hardware [[[
# """""""

## Works with hardware, unlikely that this is needed on non bare metal systems.
packages__group_core_hardware:
  - 'hdparm'
  - 'smartmontools'
  - 'powertop'
  - 'ethtool'
  - 'lshw'
  - 'lm-sensors'

  ## Install manually in the rare case this is required.
  # - 'idle3-tools'

packages__group_core_hardware_wireless:
  - 'iw'
  - 'rfkill'

packages__group_hardware_info:
  ## Legacy:
  # - 'sysinfo'

  - 'hwinfo'
  - 'hardinfo'
  - 'lsscsi'
  - 'sg3-utils'
  - 'cpuid'

packages__group_hardware_info_gui:
  - 'lshw-gtk'
  - 'usbview'

packages__group_sysadmin_hardware_minimum:
  - 'isenkram-cli'

# .. ]]]

# Benchmark [[[
# """""""""""""

packages__group_hardware_testing_and_benchmarking_minimum:
  - 'f3'
  ## WAIT: As of buster, fio depends on Python2.
  - '{{ "fio" if (packages__python2_optional_packages|d() | bool) else "" }}'
  - 'sysbench'

packages__group_hardware_testing_and_benchmarking_additional:
  - 'cpuburn'
  - 'stress'
  - 'stress-ng'
  - 'memtester'

  # - '{{ "phoronix-test-suite" if (packages__non_free_enabled|d() | bool) else "" }}'

packages__group_hardware_testing_and_benchmarking_full: |
  {{
    packages__group_hardware_testing_and_benchmarking_minimum +
    packages__group_hardware_testing_and_benchmarking_additional +
    []
  }}

# .. ]]]

# .. ]]]

# Debtags: protocol::* [[[
# """"""""""""""""""""

packages__group_tag_protocol_ldap:
  - 'ldap-utils'
  - 'jxplorer'

  ## Apache Directory Studio has been recommended, unfortunately, it is not in Debian.
  ## https://directory.apache.org/studio/

packages__group_tag_protocol_smtp:
  - 'swaks'
  - 'libnet-ssleay-perl'

  ## Superseded clients:
  # - 'lat'
  # - 'msmtp'

packages__group_sysadmin_gui_additional:
  - 'gwakeonlan'

  - 'gtkterm'
  - 'cutecom'

  ## Legacy stuff:
  # - 'gresolver'

  - 'gparted'
  - 'gnome-disk-utility'

  # - 'systemd-ui'


packages__group_tag_admin_virtualization:
  - 'virt-manager'
  - 'gir1.2-spiceclientglib-2.0'
  - 'spice-client-gtk'

packages__group_sysadmin_gui: |
  {{
    packages__group_hardware_info_gui +
    packages__group_sysadmin_gui_additional +
    []
  }}

packages__group_tag_admin_filesystem_minimal:
  - 'ranger'
  - 'btrfs-progs'

packages__group_sysadmin_minimal: |
  {{
    packages__group_tag_admin_monitoring_minimum +
    packages__group_tag_admin_filesystem_minimal +
    []
  }}

packages__group_sysadmin_basic: |
  {{
    packages__group_sysadmin_minimal +
    packages__group_tag_admin_backup +
    packages__group_tag_works_with_archive_minimal +
    packages__group_tag_admin_monitoring_basic +
    packages__group_tag_admin_monitoring_additional +
    packages__group_hardware_testing_and_benchmarking_minimum +
    []
  }}

packages__group_sysadmin_full: |
  {{
    packages__group_tag_admin_monitoring_full +
    packages__group_tag_works_with_archive_full +
    packages__group_sysadmin_minimal +
    packages__group_sysadmin_basic +
    packages__group_network_address_calculation +
    packages__group_tag_network_firewall +
    packages__group_tag_admin_virtualization +
    packages__group_imaging +
    packages__group_sysadmin_gui +
    packages__group_hardware_info +
    packages__group_sysadmin_hardware_minimum +
    packages__group_tag_protocol_ldap +
    packages__group_tag_protocol_smtp +
    []
  }}

# .. ]]]

# .. ]]]

# Printing [[[
# ~~~~~~~~

packages__group_tag_use_printing:
  - 'cups'
  - 'printer-driver-cups-pdf'

  - 'hplip'
  - 'hpijs-ppds'
  - 'printer-driver-hpcups'
  # - 'printer-driver-ptouch'

packages__group_tag_use_printing_additional:
  - 'hplip-gui'
  # - 'gtklp'

# .. ]]]

# Education [[[
# ~~~~~~~~~

packages__group_tag_field_astronomy:
  ## Based on education-astronomy (only makes recommendations).
  - 'stellarium'
  - 'gpredict'
  - 'kstars'
  - 'lightspeed'
  - 'sunclock'

packages__group_tag_field_chemistry:
  ## Based on education-chemistry (only makes recommendations).
  - 'kalzium'
  - 'gelemental'
  - 'gperiodic'
  - 'avogadro'
  - 'easychem'
  - 'chemtool'
  - 'gcrystal'
  - 'gchempaint'
  - 'gcu-bin'
  - 'chemical-mime-data'
  - 'openbabel'
  - 'gdis'
  - 'viewmol'

  - 'pymol'
  - 'apbs'

packages__group_tag_field_geography:
  ## Based on education-geography (only makes recommendations).
  - 'viking'
  - 'marble'
  - 'kgeography'
  - 'josm'

  - 'grass'
  - 'qgis'

packages__group_tag_field_mathematics_minimum:
  - 'gnome-calculator'
  - 'convertall'
  - 'units'
  - 'kcalc'

packages__group_tag_field_mathematics_additional:
  - 'speedcrunch'
  - 'qalculate-gtk'
  - 'geogebra'
  - 'geogebra-gnome'
  - 'tilem'
  - 'jfractionlab'
  - 'kmplot'
  - 'graphviz'

  - 'kbruch'
  - 'kig'

  - 'kturtle'
  - 'laby'

  - 'cantor'
  - 'cantor-backend-kalgebra'

  - 'wxmaxima'

  ## Based on education-mathematics (only makes recommendations).
  - 'mathomatic'
  - 'yacas'

packages__group_tag_field_physics:
  ## Based on education-physics (only makes recommendations).
  - 'planets'
  - 'step'

packages__group_tag_field_medical:
  - 'invesalius'
  - 'invesalius-examples'

packages__group_tag_field_linguistics_minimum:
  - 'dict'
  - 'dictd'
  - 'dict-de-en'
  - 'dict-gcide'
  - 'dict-jargon'
  - 'dict-vera'
  - 'dict-elements'

  - 'wordnet'

packages__group_tag_field_linguistics_additional:
  ## Based on education-language (only makes recommendations).
  - 'anki'
  - 'wordnet-gui'

  ## As of 3.14.1-1, it seems to have dropped the ability to configure other dict servers in the GUI?
  # - 'gnome-dictionary'

  - 'goldendict'

  ## TODO: Try.
  # - 'artha'

  ## Uncommon UI:
  # - 'ding'

packages__group_tag_field_genealogy:
  - 'gramps'

packages__group_touch_typing:
  - 'ktouch'
  - 'gtypist'
  - 'typespeed'

packages__group_education_junior:
  - 'atomix'
  - 'bambam'
  - 'childsplay'
  - 'gbrainy'
  - 'gcompris'
  - 'ktuberling'
  - 'numptyphysics'
  - 'pysiogame'
  - 'pysycache'
  - 'xball'
  - 'xmakemol-gl'

packages__group_education_games:
  - 'animals'
  - 'gamine'
  - 'tuxmath'
  - 'tuxtype'

packages__group_education_minimum: |
  {{
    packages__group_tag_field_linguistics_minimum +
    []
  }}

packages__group_education_basic: |
  {{
    packages__group_education_minimum +
    packages__group_tag_field_mathematics_minimum +
    packages__group_tag_field_geography +
    packages__group_tag_field_astronomy +
    packages__group_tag_field_linguistics_additional +
    packages__group_touch_typing +
    []
  }}

packages__group_education_additional_dist: []

packages__group_education_full: |
  {{
    packages__group_education_basic +
    packages__group_tag_field_mathematics_additional +
    packages__group_tag_field_chemistry +
    packages__group_tag_field_physics +
    packages__group_tag_field_medical +
    packages__group_tag_field_genealogy +
    packages__group_education_additional_dist +
    []
  }}

# .. ]]]

# Multimedia [[[
# ~~~~~~~~~~

packages__group_multimedia_minimum:
  - 'clementine'

  - 'mplayer'
  - 'smplayer'
  - 'vorbis-tools'
  - 'mediainfo'
  - 'mediainfo-gui'

  ## vlc-plugin-vlsub seems to be included in vlc-nox
  - 'vlc'
  - 'kodi'

  - 'gpodder'

  ## Currently not working:
  # - 'minitube'
  # - 'smtube'

  - 'cheese'
  - 'digikam'
  - 'viewnior'

  - 'webp'

packages__group_multimedia_editing_minimum:
  - 'gimp'
  - 'inkscape'
  - 'audacity'

packages__group_multimedia_editing_additional:
  - 'gaupol'
  - 'gcstar'

  ## WAIT: Not in stable
  # - 'autotrace'

  - 'blender'
  - 'exactimage'
  - 'imagemagick'
  - 'icnsutils'
  - 'qrencode'

  - 'librecad'
  - 'librsvg2-bin'
  - 'pitivi'

  - 'x264'
  - 'x265'

  ## Needs testing
  # - 'ardour3'

packages__group_multimedia_basic: |
  {{
    packages__group_multimedia_minimum +
    packages__group_multimedia_editing_minimum +
    []
  }}

packages__group_multimedia_additional:
  - 'ffmpeg'

  ## For MPEG-4
  ## Collides with libavcodec56 from 6:11.8-1~deb8u1
  - 'libavcodec-extra'

  - 'winff'
  - '{{ "python-eyed3" if (packages__python2_optional_packages|d() | bool) else "" }}'

  - 'soundconverter'

  - 'id3v2'

  - 'gespeaker'
  - '{{ "mbrola" if (packages__non_free_enabled|d() | bool) else "" }}'

packages__group_multimedia_cd_ripping:
  - 'asunder'
  - 'goobox'
  - 'cdrdao'
  - 'sound-juicer'

packages__group_multimedia_dvd_ripping:
  - 'dvdbackup'
  - 'handbrake'

packages__group_multimedia_full: |
  {{
    packages__group_multimedia_basic +
    packages__group_multimedia_additional +
    packages__group_multimedia_editing_additional +
    packages__group_multimedia_cd_ripping +
    packages__group_multimedia_dvd_ripping +
    []
  }}

# .. ]]]

# Office [[[
# ~~~~~~

packages__group_pdf_viewing:
  - 'evince'

packages__group_pdf_viewing_additional:
  - 'mupdf'
  - 'qpdfview'
  - 'pdfgrep'
  - 'xournal'

packages__group_pdf_editing:
  - 'pdfposter'

  - 'pdftk'
  - 'pdfchain'

  - 'pdfmod'

packages__group_typesetting_minimal:
  - 'texlive-latex-base'

  ## To install TeX Live manually if needed.
  ## https://www.tug.org/texlive/debian.html
  - 'equivs'

  - 'hugo'

packages__group_typesetting_converters:
  - 'latex2rtf'
  - 'gnuhtml2latex'
  - 'writer2latex'
  - 'libreoffice-writer2latex'
  - 'docx2txt'
  - 'wkhtmltopdf'
  - 'rst2pdf'
  - 'grip'

packages__group_typesetting_additional:
  - 'texlive-full'
  - 'biber'
  - 'jabref'

  - 'kile'
  - 'kile-doc'
  - 'kile-l10n'

  - 'vim-latexsuite'

packages__group_typesetting_beginners:
  - 'lyx'

packages__group_typesetting_full: |
  {{
    packages__group_typesetting_minimal +
    packages__group_typesetting_beginners +
    packages__group_typesetting_converters +
    packages__group_typesetting_additional +
    []
  }}

packages__group_office_sweethome:
  - 'sweethome3d'
  - 'sweethome3d-furniture'
  - 'sweethome3d-furniture-editor'
  - 'sweethome3d-textures-editor'
  - '{{ "sweethome3d-furniture-nonfree" if (packages__non_free_enabled|d() | bool) else "" }}'

packages__group_office_minimal:
  - 'aspell-en'
  - 'libreoffice-writer'
  - 'libreoffice-pdfimport'
  - 'libreoffice-calc'
  - 'libreoffice'
  - 'keepnote'
  - 'qtqr'
  - 'mdp'

packages__group_office_additional:
  - 'libreoffice-writer2xhtml'
  - 'libreoffice-wiki-publisher'

  ## CLI file converter based on LibreOffice.
  - 'unoconv'

  # - 'libreoffice-java-common'

  ## Not in Debian since jessie.
  # - 'rednotebook'

  - 'calibre'
  - 'fbreader'

  - 'impressive'
  - 'sm'
  - 'kchmviewer'
  - 'gscan2pdf'

  # - 'gtg'
  # - 'taskwarrior'
  # - 'bugwarrior'

  - 'simple-scan'

  # - 'glabels'

  ## For Paperwork:
  - 'python3-dev'
  - 'python3-pil'
  - 'python3-whoosh'
  - 'libenchant-dev'

packages__group_office_basic: |
  {{
    packages__group_pdf_viewing +
    packages__group_pdf_editing +
    packages__group_typesetting_minimal +
    packages__group_office_minimal +
    []
  }}

packages__group_office_full: |
  {{
    packages__group_office_basic +
    packages__group_office_sweethome +
    packages__group_pdf_viewing_additional +
    packages__group_office_additional +
    packages__group_typesetting_full +
    []
  }}

# .. ]]]

# Development [[[
# ~~~~~~~~~~~


# Revision Control System [[[
# """""""""""""""""""""""

packages__group_tag_devel_rcs_minimal:
  - 'myrepos'
  - 'git'
  - 'git-remote-gcrypt'

  - 'tig'

packages__group_tag_devel_rcs_additional:
  - 'git-svn'
  - 'git-el'
  - 'git-remote-bzr'
  - 'git-cvs'
  - 'git-email'
  - 'git-gui'
  - 'gitk'

  # ypid does not use it:
  # - 'vcsh'

  ## Just use git-svn:
  # - 'subversion'

  - 'bzr'
  - 'mercurial'

  ## Best to run this on a server as cron job:
  # - 'github-backup'

  ## Upstream is not longer maintained.
  # - 'gitstats'

  ## Not yet in stable.
  # - 'gitinspector'

  - 'gource'
  - 'pepper'

  ## Actually diffing, merging stuff:
  - 'patchutils'
  - 'colordiff'
  - 'rdiff'
  - 'vbindiff'
  - 'diffoscope'

  - 'meld'

packages__group_tag_devel_rcs_full: |
  {{
    packages__group_tag_devel_rcs_minimal +
    packages__group_tag_devel_rcs_additional +
    []
  }}

# .. ]]]

packages__group_devel_language_independent_unit_testing:
  - 'bats'

packages__group_tag_devel_i18n:
  - 'isoquery'

packages__group_devel_hex_editor:
  - 'ht'
  - 'bless'
  - 'wxhexeditor'

packages__group_devel_ai:
  - '{{ "python-aiml" if (packages__python2_optional_packages|d() | bool) else "" }}'

packages__group_devel_android:
  - 'adb'
  - 'android-sdk-platform-tools-common'
  - 'fastboot'
  - 'pidcat'
  - 'heimdall-flash'
  - 'heimdall-flash-frontend'
  - 'fdroidcl'

packages__group_devel_debian:
  - 'dh-make'
  - 'debhelper'
  - 'dpatch'
  - 'asciidoc'
  - 'apt-venv'

packages__group_devel_java:
  - 'openjdk-11-jdk'
  - 'libtrove3-java'
  - 'gradle'
  - 'maven'
  - 'ant'
  - 'ant-optional'

packages__group_devel_qt:

  ## Conflicts: qt5-default
  # - 'qt4-default'

  - 'qt5-default'
  - 'qt5-qmake'
  # - 'qt5-doc-html'

  - 'qtcreator'

packages__group_devel_graphics:
  - 'libgl1-mesa-dev'
  - 'freeglut3-dev'
  - 'mesa-utils'
  - 'mesa-utils-extra'

  ## Provides :command:`rsvg-convert` needed for development of the doclicense LaTeX package.
  - 'librsvg2-bin'

packages__group_devel_javascript:
  - 'npm'
  - 'nodejs'
  - 'node-uglify'
  - 'node-mysql'
  - 'node-debug'
  - 'coffeescript'

packages__group_devel_web:
  - 'jekyll'
  - 'csstidy'
  - 'tidy'

  ## Seems to be no longer the default of https://validator.w3.org:
  # - 'w3c-markup-validator'

packages__group_tag_devel_lang_haskell:
  - 'haskell-platform'

  - 'libghc-json-dev'
  - 'libghc-regex-tdfa-dev'
  - 'libghc-transformers-base-dev'
  - 'haskell-devscripts'

packages__group_devel_golang:
  - 'golang'

packages__group_tag_field_electronics:
  ## Based on:
  ## * education-electronics (only makes recommendations).
  ## * https://media.ccc.de/browse/conferences/camp2015/camp2015-6634-pushing_the_limits_of_diy_electronics.html#video

  - 'kicad'
  - 'kicad-doc-en'

  - 'oregano'
  - 'gnucap'

  - 'fritzing'
  - 'arduino'
  - 'gpsim'
  - 'electric'
  - 'freehdl'
  - 'gtkwave'
  - 'pcb'
  - 'xcircuit'

  - 'xoscope'
  - 'sigrok'
  - 'pulseview'

  - 'flashrom'
  - 'nvramtool'

  ## https://www.coreboot.org/Superiotool
  ## Only needed for low level development.
  - 'superiotool'


# Perl [[[
# """"

packages__group_tag_devel_lang_perl:
  - 'perl'
  - 'libmodule-pluggable-perl'

  ## Can install modules from tarball or GitHub which regular cpan cannot do as it seems.
  - 'cpanminus'

  - 'perltidy'
  - 'libperl-critic-perl'

  - '{{ "dh-make-perl" if (ansible_pkg_mgr in ["apt"]) else "" }}'
  - '{{ "apt-file" if (ansible_pkg_mgr in ["apt"]) else "" }}'

  - 'libconst-fast-perl'
  - 'libboolean-perl'
  - 'libset-scalar-perl'
  - 'libdata-dumper-simple-perl'

  - 'libterm-readline-perl-perl'
  - 'libipc-system-simple-perl'
  - 'libnumber-bytes-human-perl'

  - 'libdbi-perl'
  - 'libdbd-sqlite3-perl'

  - 'libjson-perl'
  - 'libyaml-syck-perl'

  - 'libdatetime-set-perl'
  - 'libdatetime-format-ical-perl'
  - 'libtime-duration-perl'
  - 'libtime-format-perl'

  ## In perl core modules.
  # - 'libtime-hires-perl'

  - 'liblocal-lib-perl'
  - 'libio-captureoutput-perl'

  - 'liblog-log4perl-perl'
  - 'liblog-any-perl'
  - 'liblog-any-adapter-log4perl-perl'
  - 'liblog-message-perl'
  - 'liblog-message-simple-perl'

  - 'libfile-next-perl'

  - 'libnet-ip-perl'
  - 'libnet-dns-perl'
  - 'libnet-ldap-perl'
  - 'libnet-jabber-perl'
  - 'libnet-openssh-perl'
  - 'libnet-openssh-parallel-perl'
  - 'libnet-openssh-compat-perl'

  - 'libemail-mime-perl'
  - 'libwww-mechanize-shell-perl'
  - 'libwww-perl'
  - 'liburi-find-perl'
  - 'libhtml-parser-perl'
  - 'libimage-exiftool-perl'
  - 'libtext-csv-perl'
  - 'libtext-csv-xs-perl'
  - 'libconfig-simple-perl'
  - 'libdata-ical-perl'
  - 'libpod-markdown-perl'
  # - 'libtext-dhcpleases-perl'

  - 'libdevice-serialport-perl'

  # Legacy:
  # - 'libnagios-plugin-perl'

  - 'libmonitoring-plugin-perl'

# .. ]]]

# Python [[[
# """"""

packages__group_tag_devel_lang_python:
  - 'yapf'
  - 'yapf3'
  - 'twine'
  - '{{ "python-wheel" if (packages__python2_optional_packages|d() | bool) else "" }}'
  - 'python3-wheel'
  - '{{ "python-pycodestyle" if (packages__python2_optional_packages|d() | bool) else "" }}'
  - 'python3-pycodestyle'
  - '{{ "python-autopep8" if (packages__python2_optional_packages|d() | bool) else "" }}'
  - '{{ "python-coverage" if (packages__python2_optional_packages|d() | bool) else "" }}'
  - 'python3-coverage'
  - '{{ "python-flake8" if (packages__python2_optional_packages|d() | bool) else "" }}'
  - 'flake8'
  - 'python3-flake8'
  - '{{ "pylint" if (packages__python2_optional_packages|d() | bool) else "" }}'
  - 'pylint3'
  - '{{ "ipython" if (packages__python2_optional_packages|d() | bool) else "" }}'
  - 'ipython3'
  - 'python3-all'
  - 'python3-dev'
  - 'isort'
  - '{{ "python-virtualenv" if (packages__python2_optional_packages|d() | bool) else "" }}'
  - 'python3-virtualenv'
  - '{{ "virtualenvwrapper" if (packages__python2_optional_packages|d() | bool) else "" }}'
  - '{{ "python-feedparser" if (packages__python2_optional_packages|d() | bool) else "" }}'
  - '{{ "python-pip" if (packages__python2_optional_packages|d() | bool) else "" }}'
  - 'python3-pip'
  - '{{ "python-setuptools" if (packages__python2_optional_packages|d() | bool) else "" }}'
  - 'python3-setuptools'
  - 'python3-setuptools-git'
  - '{{ "python-cjson" if (packages__python2_optional_packages|d() | bool) else "" }}'
  - '{{ "python-imaging" if (packages__python2_optional_packages|d() | bool) else "" }}'
  - '{{ "python-dulwich" if (packages__python2_optional_packages|d() | bool) else "" }}'
  - '{{ "python-pycalendar" if (packages__python2_optional_packages|d() | bool) else "" }}'
  - 'python3-radicale'
  - 'python3-flaskext.wtf'
  - 'python3-icu'
  - '{{ "python-termcolor" if (packages__python2_optional_packages|d() | bool) else "" }}'
  - '{{ "python-monotonic" if (packages__python2_optional_packages|d() | bool) else "" }}'
  - 'python3-monotonic'
  - '{{ "python-naturalsort" if (packages__python2_optional_packages|d() | bool) else "" }}'
  - '{{ "python-colorama" if (packages__python2_optional_packages|d() | bool) else "" }}'
  - 'python3-colorama'
  - 'python3-coloredlogs'
  - '{{ "python-unidiff" if (packages__python2_optional_packages|d() | bool) else "" }}'
  - 'python3-unidiff'
  - '{{ "python-appdirs" if (packages__python2_optional_packages|d() | bool) else "" }}'
  - 'python3-appdirs'
  - '{{ "python-pygraphviz" if (packages__python2_optional_packages|d() | bool) else "" }}'
  - 'python3-pygraphviz'
  - '{{ "python-gv" if (packages__python2_optional_packages|d() | bool) else "" }}'
  - 'python3-gv'
  - 'python3-atomicwrites'
  - 'python3-pykwalify'

  - '{{ "python-xmltodict" if (packages__python2_optional_packages|d() | bool) else "" }}'
  - 'python3-xmltodict'
  - '{{ "python-defusedxml" if (packages__python2_optional_packages|d() | bool) else "" }}'
  - 'python3-defusedxml'
  - '{{ "python-lxml" if (packages__python2_optional_packages|d() | bool) else "" }}'
  - 'python3-lxml'

  - 'python3-nagiosplugin'

  ## Used for logging to systemd-journald:
  - 'python3-systemd'

  ## For reportbug:
  - '{{ "python-vte" if (packages__python2_optional_packages|d() | bool) else "" }}'

  ## TODO: Only install modules interacting with GUI when xserver-xorg is
  ## installed.
  - '{{ "python-tk" if (packages__python2_optional_packages|d() | bool) else "" }}'
  - '{{ "python-xlib" if (packages__python2_optional_packages|d() | bool) else "" }}'
  - 'python3-tk'
  - 'idle'
  - '{{ "python-pmw" if (packages__python2_optional_packages|d() | bool) else "" }}'

  - '{{ "python-netaddr" if (packages__python2_optional_packages|d() | bool) else "" }}'
  - 'python3-netaddr'

  - 'python3-git'
  - '{{ "python-sh" if (packages__python2_optional_packages|d() | bool) else "" }}'
  - 'python3-sh'
  - '{{ "python-dateutil" if (packages__python2_optional_packages|d() | bool) else "" }}'
  - 'python3-dateutil'
  - '{{ "python-pytimeparse" if (packages__python2_optional_packages|d() | bool) else "" }}'
  - 'python3-pytimeparse'
  - '{{ "python-twill" if (packages__python2_optional_packages|d() | bool) else "" }}'
  - '{{ "python-jsmin" if (packages__python2_optional_packages|d() | bool) else "" }}'
  - 'python3-jsmin'
  - '{{ "python-mysqldb" if (packages__python2_optional_packages|d() | bool) else "" }}'
  - '{{ "python-all-dev" if (packages__python2_optional_packages|d() | bool) else "" }}'
  - 'libevent-dev'
  - '{{ "python-prettytable" if (packages__python2_optional_packages|d() | bool) else "" }}'
  - 'python3-prettytable'
  - '{{ "python-paramiko" if (packages__python2_optional_packages|d() | bool) else "" }}'
  - 'python3-paramiko'
  - '{{ "python-pexpect" if (packages__python2_optional_packages|d() | bool) else "" }}'
  - 'python3-pexpect'
  - '{{ "python-configparser" if (packages__python2_optional_packages|d() | bool) else "" }}'
  - '{{ "python-yaml" if (packages__python2_optional_packages|d() | bool) else "" }}'
  - 'python3-yaml'
  - '{{ "python-pretty-yaml" if (packages__python2_optional_packages|d() | bool) else "" }}'
  - 'python3-pretty-yaml'
  - '{{ "python-unittest2" if (packages__python2_optional_packages|d() | bool) else "" }}'
  - '{{ "python-tox" if (packages__python2_optional_packages|d() | bool) else "" }}'
  - '{{ "python-flexmock" if (packages__python2_optional_packages|d() | bool) else "" }}'
  - '{{ "python-ruamel.yaml" if (packages__python2_optional_packages|d() | bool) else "" }}'
  - 'python3-ruamel.yaml'
  - '{{ "python-traceback2" if (packages__python2_optional_packages|d() | bool) else "" }}'
  - 'python3-traceback2'
  - 'python3-nose'
  - 'python3-nose2-cov'
  - 'python3-flexmock'
  - '{{ "python-redis" if (packages__python2_optional_packages|d() | bool) else "" }}'
  - 'python3-redis'
  - '{{ "python-elasticsearch" if (packages__python2_optional_packages|d() | bool) else "" }}'
  - 'python3-elasticsearch'
  - '{{ "python-memcache" if (packages__python2_optional_packages|d() | bool) else "" }}'
  - 'python3-memcache'
  - '{{ "python-requests" if (packages__python2_optional_packages|d() | bool) else "" }}'
  - 'python3-requests'

  - '{{ "python-unidecode" if (packages__python2_optional_packages|d() | bool) else "" }}'
  - 'python3-unidecode'

  - '{{ "python-twisted-web" if (packages__python2_optional_packages|d() | bool) else "" }}'

  - '{{ "python-scrypt" if (packages__python2_optional_packages|d() | bool) else "" }}'

  - '{{ "python-future" if (packages__python2_optional_packages|d() | bool) else "" }}'
  - 'python3-future'

  - '{{ "python-zbar" if (packages__python2_optional_packages|d() | bool) else "" }}'

  - '{{ "python-apt" if (ansible_pkg_mgr in ["apt"] and packages__python2_optional_packages|d() | bool) else "" }}'
  - '{{ "python3-apt" if (ansible_pkg_mgr in ["apt"]) else "" }}'

  - '{{ "python-iso8601" if (packages__python2_optional_packages|d() | bool) else "" }}'
  - 'python3-iso8601'

  ## Donâ€™t use:
  # - '{{ "python-beautifulsoup" if (packages__python2_optional_packages|d() | bool) else "" }}'

packages__group_tag_devel_lang_python_additional:
  - 'python3-django'
  - '{{ "python-django" if (packages__python2_optional_packages|d() | bool) else "" }}'
  - 'runsnakerun'
  - '{{ "python-bs4" if (packages__python2_optional_packages|d() | bool) else "" }}'
  - '{{ "python-bs4-doc" if (packages__python2_optional_packages|d() | bool) else "" }}'
  - 'python3-bs4'
  - 'python3-doc'
  - '{{ "python-traceback2" if (packages__python2_optional_packages|d() | bool) else "" }}'
  - 'python3-traceback2'
  - 'python3-nose'
  - 'python3-nose2-cov'
  - 'python3-testfixtures'

  - '{{ "python-q" if (packages__python2_optional_packages|d() | bool) else "" }}'
  - 'python3-q'
  - 'python3-geoip'
  - 'python3-geojson'
  - '{{ "python-pyftpdlib" if (packages__python2_optional_packages|d() | bool) else "" }}'
  - 'python3-pyftpdlib'
  - '{{ "python-humanize" if (packages__python2_optional_packages|d() | bool) else "" }}'
  - 'python3-humanize'
  - '{{ "python-pytimeparse" if (packages__python2_optional_packages|d() | bool) else "" }}'
  - 'python3-pytimeparse'
  - '{{ "python-gnupg" if (packages__python2_optional_packages|d() | bool) else "" }}'
  - 'python3-gnupg'
  - 'python3-openssl'
  - 'python3-jinja2'
  - '{{ "python-pystache" if (packages__python2_optional_packages|d() | bool) else "" }}'
  - 'python3-pystache'
  - 'python3-markdown'
  - 'python3-numpy'
  - '{{ "python-graypy" if (packages__python2_optional_packages|d() | bool) else "" }}'
  - 'python3-graypy'
  - '{{ "python-seaborn" if (packages__python2_optional_packages|d() | bool) else "" }}'
  - 'python3-seaborn'
  - 'python3-pyqt5'
  - '{{ "python-scrapy" if (packages__python2_optional_packages|d() | bool) else "" }}'
  - '{{ "python-sphinx" if (packages__python2_optional_packages|d() | bool) else "" }}'
  - 'pyqt5-dev'
  - 'python3-sphinx'
  - '{{ "python-sphinxcontrib.spelling" if (packages__python2_optional_packages|d() | bool) else "" }}'
  - 'python3-sphinxcontrib.spelling'
  - '{{ "python-sphinx-rtd-theme" if (packages__python2_optional_packages|d() | bool) else "" }}'
  - 'python3-sphinx-rtd-theme'
  - '{{ "python-sphinxcontrib.programoutput" if (packages__python2_optional_packages|d() | bool) else "" }}'
  - 'python3-sphinxcontrib.programoutput'
  - '{{ "python-sphinx-argparse" if (packages__python2_optional_packages|d() | bool) else "" }}'
  - 'python3-sphinx-argparse'
  - '{{ "python-bibtex" if (packages__python2_optional_packages|d() | bool) else "" }}'
  - '{{ "python-git" if (packages__python2_optional_packages|d() | bool) else "" }}'
  - '{{ "python-gitdb" if (packages__python2_optional_packages|d() | bool) else "" }}'
  - 'python3-pygit2'
  - '{{ "python-sqlite" if (packages__python2_optional_packages|d() | bool) else "" }}'
  - '{{ "python-sqlalchemy" if (packages__python2_optional_packages|d() | bool) else "" }}'
  - 'python3-sqlalchemy'
  - '{{ "python-zc.lockfile" if (packages__python2_optional_packages|d() | bool) else "" }}'
  - '{{ "python-lockfile" if (packages__python2_optional_packages|d() | bool) else "" }}'
  - 'python3-lockfile'
  - '{{ "python-keyring" if (packages__python2_optional_packages|d() | bool) else "" }}'
  - 'python3-keyring'
  - '{{ "python-pycryptopp" if (packages__python2_optional_packages|d() | bool) else "" }}'
  - '{{ "python-sklearn" if (packages__python2_optional_packages|d() | bool) else "" }}'
  - '{{ "python-zmq" if (packages__python2_optional_packages|d() | bool) else "" }}'
  - 'python3-zmq'
  - '{{ "python-pyquery" if (packages__python2_optional_packages|d() | bool) else "" }}'
  - 'python3-pyquery'
  - '{{ "python-freezegun" if (packages__python2_optional_packages|d() | bool) else "" }}'
  - 'python3-freezegun'
  - '{{ "python-wrapt" if (packages__python2_optional_packages|d() | bool) else "" }}'
  - 'python3-wrapt'
  - '{{ "python-enum34" if (packages__python2_optional_packages|d() | bool) else "" }}'
  - '{{ "python-pickleshare" if (packages__python2_optional_packages|d() | bool) else "" }}'
  - 'python3-pickleshare'
  - '{{ "python-urllib3" if (packages__python2_optional_packages|d() | bool) else "" }}'
  - 'python3-urllib3'
  - '{{ "python-click" if (packages__python2_optional_packages|d() | bool) else "" }}'
  - 'python3-click'
  - '{{ "python-gmpy2" if (packages__python2_optional_packages|d() | bool) else "" }}'
  - 'python3-gmpy2'
  - '{{ "python-cryptography" if (packages__python2_optional_packages|d() | bool) else "" }}'
  - 'python3-cryptography'
  - 'python3-btrfs'
  - 'python3-ldap3'

# .. ]]]

# Desktop virtualization [[[
# """"""""""""""""""""""
#
# Libvirt/KVM with Spice is quite good but at least for running Windows VMs,
# Virtualbox seems to be a bit on top.
#
# Libvirt is handled by `debops.libvirtd`.

packages__group_devel_virtualization:
  # - 'uml-utilities'

  - 'qemu'
  - 'qemu-utils'
  - 'qemu-user'
  # - 'qemu-user-binfmt'
  - 'qemu-user-static'

  ## Just provides a wrapper script :file:`/usr/bin/kvm` which runs :program:`qemu-system-x86`.
  - 'qemu-kvm'

  ## `kvm-ok` has been separated (https://bugs.launchpad.net/ubuntu/+source/qemu-kvm/+bug/429443). Seems to not be in Debian?
  - 'cpu-checker'

  ## GUI for testing/dev only. For real virtualization use either libvirt/KVM or Virtualbox.
  - 'aqemu'
  # - 'qtemu'
  # - 'qemuctl'

  - 'vagrant'
  - 'vagrant-libvirt'

packages__group_devel_virtualization_desktop_contrib: []
  # - 'virtualbox'
  # - 'virtualbox-dkms'
  # - 'virtualbox-qt'

packages__group_devel_virtualization_desktop_non_free: []
  # - 'virtualbox-guest-additions-iso'

packages__group_devel_virtualization_desktop: |
  {{
    (packages__group_devel_virtualization_desktop_contrib if (ansible_virtualization_role in ['host', 'NA'] and packages__contrib_enabled) else []) +
    (packages__group_devel_virtualization_desktop_non_free if (ansible_virtualization_role in ['host', 'NA'] and packages__non_free_enabled) else []) +
    []
  }}

packages__group_devel_virtualization_detection:
  - 'virt-what'
  - 'imvirt'

# .. ]]]


packages__group_devel_live_system:
  - 'live-build'
  - 'squashfs-tools'
  - 'debootstrap'
  - 'grml2usb'
  - 'fatresize'

packages__group_devel_shellscript:
  - 'shellcheck'

packages__group_database_tools:
  - 'mysql-workbench'
  - 'postgresql-client'
  - 'pgadmin3'
  - 'sqlitebrowser'
  - 'sqlite3'

packages__group_devel_lua:
  - 'lua-penlight'
  - 'love'

packages__group_devel_llvm:
  - 'llvm'
  - 'llvm-dev'
  - 'clang'
  - 'libclang-dev'

packages__group_tag_devel_lang_haxe:
  - 'haxe'

packages__group_tag_devel_lang_ruby:
  - 'rbenv'
  - 'rake'
  - 'ruby-kramdown'
  - 'ruby-gsl'
  - 'bundler'
  - 'ruby-builder-doc'
  - 'ruby-dev'


packages__group_tag_devel_ide: []
  # - 'eclipse'

  # - 'netbeans'

packages__group_devel_x11_library:
  - 'libxss-dev'

packages__group_devel_additional:
  - 'uuid-dev'
  - 'build-essential'
  - 'tcc'
  - 'cmake'
  - 'shtool'
  - 'checkinstall'
  - 'devscripts'
  - 'autotools-dev'
  - 'dh-autoreconf'
  - 'automake'
  # - 'darcs'
  - 'quilt'
  - 'fakeroot'
  - 'xutils'
  - 'lintian'
  - 'libtool'
  - 'libtool-bin'
  - 'libcap2-bin'
  - 'libboost-all-dev'
  - 'pandoc'
  - 'pandoc-citeproc'
  - 'cdbs'
  - 'libssl-dev'
  - 'uthash-dev'
  - 'valgrind'
  - 'alleyoop'
  - 'isomaster'
  - 'xdelta3'
  - 'libgit2-dev'

  - 'binutils'
  - 'indent'
  - 'astyle'
  - 'uncrustify'
  - 'universalindentgui'

  - 'liboasis-ocaml-dev'
  - 'libelf-dev'
  - 'famfamfam-silk'
  - 'famfamfam-flag-png'
  - 'exuberant-ctags'
  - 'libsqlite3-dev'
  - 'cloc'

# Development environment for projects [[[
# """"""""""""""""""""""""""""""""""""

packages__group_devel_env_for_lpfw:
  ## https://github.com/themighty1/lpfw
  - 'libcap-dev'
  - 'libnetfilter-conntrack-dev'
  - 'libnetfilter-queue-dev'
  - 'libnetfilter-queue1'
  - 'libnfnetlink-dev'

packages__group_devel_env_for_douane:
  - 'libboost-filesystem-dev'
  - 'libboost-regex-dev'
  - 'libboost-signals-dev'
  - 'policykit-1'
  - 'libdbus-c++-dev'
  - 'libdbus-1-dev'
  - 'liblog4cxx10-dev'
  - 'libssl-dev'
  - 'dkms'
  - 'build-essential'
  - 'libboost-signals-dev'
  - 'libdbus-c++-dev'
  - 'libdbus-1-dev'
  - 'liblog4cxx10-dev'
  - 'libgtkmm-3.0-dev'
  - 'gtk+3.0'
  - 'python3'
  - 'python3-gi'
  - 'policykit-1'
  - 'python3-dbus'

packages__group_devel_env_for_borgbackup_minimum:
  - 'zlib1g-dev'
  - 'libbz2-dev'
  - 'libncurses5-dev'
  - 'libreadline-dev'
  - 'liblzma-dev'
  - 'libsqlite3-dev'
  - 'libacl1-dev'
  - 'liblz4-dev'
  - 'libfuse-dev'
  - 'fuse'
  - 'pkg-config'
  - 'fakeroot'
  - 'cython3'

packages__group_devel_env_for_borgbackup: |
  {{
    packages__group_devel_env_for_borgbackup_minimum +
    packages__group_tag_devel_lang_python +
    []
  }}

packages__group_devel_env_for_subgraph_os:
  ## Needs `golang` from Jessie Backports.
  - 'golang'
  - 'xpra'
  - 'bridge-utils'
  - 'ebtables'

packages__group_devel_env_for_NeoLayoutViewer:
  ## https://github.com/YggdrasiI/NeoLayoutViewer.git
  - 'valac'
  - 'libgee-0.8-dev'
  - 'libgtk-3-dev'
  - 'libx11-dev'
  - 'libunique-dev'
  - 'libappindicator3-dev'

packages__group_devel_env_for_slop:
  ## https://github.com/naelstrof/slop
  - 'libglew-dev'
  - 'libimlib2-dev'
  - 'libglm-dev'

packages__group_devel_env_for_git_evtag:
  - 'dh-autoreconf'
  - 'libgit2-dev'
  - 'pkg-config'
  - 'libglib2.0-dev'
  - 'xsltproc'

packages__group_devel_env_for_freetz:
  - 'autopoint'
  - 'libncurses5-dev'
  - 'libreadline-dev'
  - 'zlib1g-dev'
  - 'flex'
  - 'bison'
  - 'texinfo'
  - 'tofrodos'
  - 'gettext'
  - 'pkg-config'
  - 'ecj'
  - 'fastjar'
  - 'libstring-crc32-perl'
  - 'libusb-dev'
  - 'libacl1-dev'
  - 'libcap-dev'
  - 'libc6-dev-i386'
  - 'lib32ncurses-dev'
  - 'gcc-multilib'
  - 'lib32stdc++6'
  - 'libglib2.0-dev'

# .. ]]]


packages__group_devel_minimum: |
  {{
    packages__group_tag_devel_rcs_minimal +
    packages__group_devel_language_independent_unit_testing +
    packages__group_devel_shellscript +
    []
  }}

packages__group_devel_basic: |
  {{
    packages__group_devel_minimum +
    packages__group_devel_hex_editor +
    packages__group_devel_web +
    packages__group_devel_javascript +
    packages__group_tag_devel_lang_python +
    packages__group_devel_java +
    packages__group_devel_qt +
    packages__group_tag_devel_ide +
    []
  }}

packages__group_devel_full: |
  {{
    packages__group_devel_basic +
    packages__group_tag_devel_rcs_full +
    packages__group_devel_debian +
    packages__group_devel_android +
    packages__group_devel_golang +
    packages__group_tag_devel_lang_ruby +
    packages__group_tag_admin_virtualization +
    packages__group_devel_virtualization +
    packages__group_devel_virtualization_detection +
    packages__group_tag_devel_lang_haxe +
    packages__group_tag_devel_lang_haskell +
    packages__group_tag_devel_lang_perl +
    packages__group_devel_graphics +
    packages__group_devel_lua +
    packages__group_devel_ai +
    packages__group_devel_additional +
    packages__group_devel_x11_library +
    []
  }}

# .. ]]]

# System management [[[
# ~~~~~~~~~~~~~~~~~~~~~

packages__group_system_management_minimal:
  - '{{ "yast2" if (ansible_os_family in ["Suse"]) else "" }}'

packages__group_system_management_additional: []

packages__group_system_management_full: |
  {{
    packages__group_system_management_minimal +
    packages__group_system_management_additional +
    []
  }}

# .. ]]]

# Package management [[[
# ~~~~~~~~~~~~~~~~~~

packages__group_package_management_minimal:
  ## Still used by things Ansible v2.3 for example.
  - 'aptitude'
  - '{{ "debian-archive-keyring" if (ansible_pkg_mgr in ["apt"]) else "" }}'
  - '{{ "apt-transport-https" if (ansible_pkg_mgr in ["apt"]) else "" }}'
  - '{{ "wajig" if (ansible_pkg_mgr in ["apt"]) else "" }}'

  # "Error: No information about packages! (Maybe no deb entries?)" on BeagleBone Black.
  # Seems to also have other issues: "initializing cache. This may take a while ** Killed"
  # - '{{ "apt-show-versions" if (ansible_pkg_mgr in ["apt"] and "armv7l" not in ansible_architecture|d("")) else "" }}'

  ## In case unattended-upgrades is not installed.
  # - 'reboot-notifier'

packages__group_package_management_additional:
  - '{{ "packagesearch" if (ansible_pkg_mgr in ["apt"]) else "" }}'
  - '{{ "apt-rdepends" if (ansible_pkg_mgr in ["apt"]) else "" }}'
  - '{{ "apt-rdepends" if (ansible_pkg_mgr in ["apt"]) else "" }}'
  - '{{ "debian-goodies" if (ansible_pkg_mgr in ["apt"]) else "" }}'
  - '{{ "debtags" if (ansible_pkg_mgr in ["apt"]) else "" }}'
  # - 'dlocate'
  - '{{ "debconf-utils" if (ansible_pkg_mgr in ["apt"]) else "" }}'

packages__group_package_management_full: |
  {{
    packages__group_package_management_minimal +
    packages__group_package_management_additional +
    []
  }}

# .. ]]]

# Package management GUI [[[
# ~~~~~~~~~~~~~~~~~~~~~~

packages__group_package_management_gui:
  - 'synaptic'
  - 'apper'

  ## Not really usable yet unfortunately:
  - 'gnome-packagekit'

# .. ]]]

# Core programs, drivers and firmware files [[[
# ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

## Minimum set of programs which I need.
packages__group_core_minimum:
  - 'coreutils'
  - 'lsb-release'
  - 'grep'
  - 'procps'
  - 'util-linux'
  - 'findutils'

  - 'fd-find'
  ## WAIT: Not yet in Debian: https://github.com/chmln/sd
  # - 'sd'

  - 'pv'
  - 'cryptsetup-bin'
  - 'cryptsetup-run'
  - 'cryptsetup-initramfs'

  ## Might be useful for some. Also comes in handy on really slow computers.
  - 'nano'

  - 'vim'
  - 'vim-nox'
  - 'neovim'

  - 'tmux'

  - '{{ ("byobu" if (packages__python2_required_packages|d() | bool) else "")
        if (ansible_distribution_release|d("")|lower in ["buster"])
        else "byobu" }}'


  - 'gnupg'
  - 'signify-openbsd'

  ## Superseded by tmux:
  # - 'screen'

  - 'git'
  - 'myrepos'
  - 'bash'
  - 'zsh'
  - 'make'
  - 'less'
  - 'file'
  - 'psmisc'

  - 'silversearcher-ag'

  ## Superseded by silversearcher:
  # - 'ack-grep'

  - 'safe-rm'
  - 'tree'

  - 'man-db'

packages__group_core_additional:
  - 'curl'
  - 'wget'

  - 'rsync'
  - 'casync'

  - 'ftp'
  - 'lftp'

  - 'openssh-client'
  - 'iproute2'
  - 'iputils-ping'
  - 'iputils-tracepath'
  - 'nmap'
  - 'fping'
  - 'iperf'
  - 'iperf3'
  - 'dnsutils'
  - 'whois'

  - 'tig'
  - 'markdown'
  - 'autojump'
  - 'zsh-syntax-highlighting'
  - 'expect'
  - 'sshpass'

  - 'libuser'

  - 'parted'
  - 'uuid'
  - 'mutt'
  - 'wipe'
  - 'nwipe'
  - 'secure-delete'
  - 'attr'
  - 'rename'
  - 'socat'
  - 'debianutils'

  - '{{ "python-setuptools" if (packages__python2_optional_packages|d() | bool) else "" }}'
  - 'python3-setuptools'

packages__group_core_basic: |
  {{
    packages__group_core_minimum +
    packages__group_core_additional +
    []
  }}

# Bare metal [[[
# """"""""""
#
# Things that do not make sense on non bare metal systems.

packages__group_boot_image_hardware_testing_and_benchmarking:
  - 'memtest86+'

  ## PassMark has taken over the original memtest86 and made it closed-source.
  ## Debian still contains version 4 which was released under a Free Software license.
  ## https://en.wikipedia.org/wiki/Memtest86#History
  ## memtest86+ seems to do the job just fine, so I am going with that.
  # - 'memtest86'

# Allows you to overwrite this when you want to install it even when
# ``packages__non_free_enabled`` is ``False``.
packages__group_cpu_microcode_non_free:
  - '{{ "intel-microcode" if (packages__non_free_enabled|d() | bool) else "" }}'
  - '{{ "amd64-microcode" if (packages__non_free_enabled|d() | bool) else "" }}'

packages__group_cpu_vulnerability_checker:
  - 'spectre-meltdown-checker'

packages__group_core_bare_metal_services_not_working_on_all_machines:
  - 'rasdaemon'

# https://wiki.archlinux.org/index.php/laptop
packages__group_tag_hardware_laptop_accu:

  ## Log battery charge (batter-stats-collector), show gnuplot graphs (battery-graph).
  - 'battery-stats'

packages__group_tag_hardware_laptop_gyroscope_and_hdd:

  ## Hard Drive Active Protection System. Should also work for HP laptops.
  - 'hdapsd'

  ## Not yet in Debian.
  # - 'hpfall'


## The following code has the issue that DVD drives are also rotational so donâ€™t automatically install hdapsd anymore
# (packages__group_tag_hardware_laptop_gyroscope_and_hdd if (
#     (ansible_form_factor|d("") in ["Notebook", "Laptop"]) and
#     (
#       (
#         ansible_devices is defined and
#         ansible_devices.values() | selectattr("rotational", "equalto", "1") | map(attribute="model") | reject("regex_search", ".*DVD.*") | list | length >= 1
#       ) or
#       ansible_devices is undefined
#     )
#   ) else []) +
#
## This could be used to fix it, but support for the `in` test was only introduced to Jinja 2.10.
# ansible_devices.values() | selectattr("rotational", "equalto", "1") | map(attribute="model") | reject("in", "DVD") | list


packages__group_core_bare_metal_services: |
  {{
    packages__group_core_bare_metal_services_not_working_on_all_machines +
    (packages__group_tag_hardware_laptop_accu if (ansible_form_factor|d("") in ["Notebook", "Laptop"]) else []) +
    []
  }}

packages__group_core_bare_metal: |
  {{
    packages__group_boot_image_hardware_testing_and_benchmarking +
    packages__group_cpu_microcode_non_free +
    packages__group_cpu_vulnerability_checker +
    packages__group_core_bare_metal_services +
    []
  }}

packages__group_core_bare_metal_xorg:
  - 'xserver-xorg-video-intel'

packages__group_core_hypervisor_guest_tools_kvm: []
  # - 'qemu-guest-agent'

packages__group_core_hypervisor_guest_tools_gui_kvm:
  - 'xserver-xorg-video-qxl'
  - 'spice-vdagent'

packages__group_core_hypervisor_guest_tools: |
  {{
    (packages__group_core_hypervisor_guest_tools_kvm if ('kvm' == (ansible_virtualization_type|d(omit)|lower)) else []) +
    []
  }}

# .. ]]]

# Firmware blobs [[[
# """"""""""""""
#
# https://git-tails.immerda.ch/tails/tree/config/chroot_local-packageslists/tails-common.list
#
# Maybe use /usr/lib/live/build/chroot_firmware from live-build for this.

packages__group_firmware_free:
  - 'firmware-linux-free'

packages__group_firmware_contrib:
  - 'b43-fwcutter'
  - 'firmware-b43-installer'

  ## Disabled because it does not respect the apt_proxy__http_direct setting and will *fail*!!! Leaving the machine without WLAN.
  ## Install manually on machines that require it.
  # - 'firmware-b43legacy-installer'

  ## Not in Tails:
  - 'linux-wlan-ng-firmware'

packages__group_firmware_non_free:
  - 'firmware-amd-graphics'

  ## Firmware for wireless adapters [[[
  - 'firmware-atheros'
  - 'firmware-brcm80211'

  - 'firmware-ipw2x00'
  - 'firmware-iwlwifi'
  - 'firmware-libertas'

  ## Meta-package:
  # - 'firmware-linux'

  - 'firmware-linux-nonfree'
  - 'firmware-misc-nonfree'

  - 'firmware-realtek'
  - 'firmware-zd1211'
  ## ]]]

packages__group_firmware_dist: []

packages__group_firmware_full: |
  {{
    packages__group_firmware_free +
    (packages__group_firmware_contrib  if (packages__contrib_enabled|d() | bool)  else []) +
    (packages__group_firmware_non_free if (packages__non_free_enabled|d() | bool) else []) +
    packages__group_firmware_dist +
    []
  }}

# .. ]]]

packages__group_core_cron:
  - 'vrms'

packages__group_core_full: |
  {{
    packages__group_core_minimum +
    packages__group_core_basic +
    packages__group_system_management_full +
    packages__group_package_management_minimal +
    packages__group_core_minimum +
    packages__group_core_cron +
    (packages__group_core_bare_metal if (ansible_virtualization_role in ['host', 'NA']) else []) +
    (packages__group_core_hardware   if (ansible_virtualization_role in ['host', 'NA']) else []) +
    (packages__group_core_hardware_wireless if (ansible_form_factor|d("") in ["Notebook", "Laptop"]) else []) +
    (packages__group_core_hypervisor_guest_tools if ('guest' == ansible_virtualization_role) else []) +
    []
  }}

# .. ]]]

# CLI programs [[[
# ~~~~~~~~~~~~

# Console programs not really intended for server.
packages__group_user_terminal_programs_minimum:

  ## Include conditionally.
  # - 'unison'

  - '{{ "git-annex-standalone"
        if ("debops_service_neurodebian" in group_names)
        else "git-annex" }}'
  - 'nocache'

  - 'setserial'
  - 'minicom'
  - 'picocom'
  - 'cu'

  - 'pwgen'
  # - 'mosh'
  - 'pssh'
  - 'sshfs'
  - 'encfs'
  - 'debian-keyring'
  - 'inotify-tools'

  - 'rpl'

  - 'ttyrec'

  - 'uniutils'
  - 'dos2unix'
  - 'jq'
  - 'yq'
  - 'yamllint'
  - 'crudini'
  - 'json2yaml'
  - 'yaml2json'
  - 'xmlstarlet'

  - 'csvtool'

  - 'python3-csvkit'
  ## Dependency of `/usr/bin/in2csv`. `python3-csvkit` only suggests it.
  ## FIXME: File bug report. https://bugs.debian.org/cgi-bin/pkgreport.cgi?pkg=python3-csvkit;dist=unstable
  - 'python3-openpyxl'

  - 'rhash'
  - 'libarchive-zip-perl'
  - 'rmlint'

  - 'dateutils'

  ## Provides ``xmllint``.
  - 'libxml2-utils'

  ## flat file extractor
  # - 'ffe'

# .. ]]]

# Live system [[[
# ~~~~~~~~~~~

packages__group_live_system_additional:
  - '{{ "debconf-utils" if (ansible_pkg_mgr in ["apt"]) else "" }}'
  - 'live-boot'
  - 'live-config'
  - 'live-tools'
  - 'user-setup'
  - 'sudo'
  - 'live-config-systemd'
  - 'console-data'
  - 'console-setup'
  - 'xkb-data'
  - 'keyboard-configuration'
  - 'task-ssh-server'
  - 'task-laptop'

  ## Allow Debian installation form started live system.
  - 'debian-installer-launcher'

  - 'virtualbox-guest-utils'

# .. ]]]

# Linuxmuster.net [[[
# ~~~~~~~~~~~~~~~

packages__group_linuxmuster:
  ## Packaged by linuxmuster.net:
  - 'linuxmuster-client-truecrypt'
  ## Preferred but not yet sure for which versions of Ubuntu this package is available:
  # - 'linuxmuster-client-veracrypt'
  - 'linuxmuster-client-extras'

packages__group_school_additional_dev:
  - 'tinyca'
  - 'emacs23'
  - 'emacs24'
  - 'xemacs21'
  - 'auto-complete-el'
  - 'libx11-dev'
  - 'freeglut3'
  - 'freeglut3-dev'
  - 'libglew-dev'
  - 'libglewmx-dev'
  - 'libglu1-mesa'
  - 'libglu1-mesa-dev'
  - 'libgl1-mesa-glx'
  - 'libgl1-mesa-dev'
  - 'libopencv-dev'
  - 'scratch'
  - 'libsdl2-dev'
  - 'libsdl2-image-2.0-0'
  - 'libsdl2-image-dev'
  - 'libsdl2-mixer-2.0-0'
  - 'libsdl2-mixer-dev'
  - 'libsdl2-net-2.0-0'
  - 'libsdl2-net-dev'
  - 'libsdl2-ttf-2.0-0'
  - 'libsdl2-ttf-dev'
  - 'libsdl1.2debian'
  - 'libsdl-sound1.2'
  - 'libsdl-sound1.2-dev'
  - 'libgtk2.0-dev'
  - 'libgtk2.0-doc'
  - 'bluefish'
  - 'aria2'

packages__group_school_additional:
  - '{{ "google-earth" if (packages__non_free_enabled|d() | bool) else "" }}'

  ## Use DebOps roles to set this up.
  # Also installs Apache2 on Debian Jessie:
  # - 'php5'
  # - 'php5-mysql'
  - '{{ "python-mysqldb" if (packages__python2_optional_packages|d() | bool) else "" }}'

  - 'monkeysign'
  - 'amarok'
  - 'audacious'
  - 'opus-tools'
  - 'lame'
  - 'gnome-mplayer'
  - 'openshot'
  - 'pitivi'
  - 'mkvtoolnix-gui'
  - 'melt'
  - 'converseen'
  - 'scribus'
  - 'pyrenamer'
  - 'ubuntu-restricted-extras'

  - 'sup-mail'
  - 'ruby-gpgme'

packages__group_school_services:
  - 'apache2'
  - 'libapache2-mod-python'
  - 'libapache2-mod-python-doc'
  - 'mysql-server'

# .. ]]]

# Gnome desktop environment [[[
# ~~~~~~~~~~~~~~~~~~~~~~~~~
#
# Window managers like Gnome tend to install a lot of software which you might not need/want.
# To avoid this, the following packages groups can be used to allow maximum
# user choice of applications to install.

# .. envvar:: packages__group_wm_gnome_core_debian_jessie
#
# Core packages to install Gnome on Debian Jessie.
# This list has been generated by this command:
# :command:`apt-cache depends gnome-core | grep 'Depends: ' | sed --regexp-extended "s/^\s*Depends: (.*)/  - '\1'/" | grep --invert-match --extended-regexp "'(gnome-user-share|vino|empathy|gnome-contacts|gnome-online-accounts|gnome-sushi)'`
packages__group_wm_gnome_core_debian_jessie:
  - 'libatk-adaptor'
  - 'at-spi2-core'
  - 'adwaita-icon-theme'
  - 'baobab'
  - 'fonts-cantarell'
  - 'caribou'
  - 'caribou-antler'
  - 'libcaribou-gtk-module'
  - 'libcaribou-gtk3-module'
  - 'dconf-gsettings-backend'
  - 'dconf-tools'
  - 'eog'
  - 'evince'
  - 'evolution-data-server'
  - 'sound-theme-freedesktop'
  - 'glib-networking'
  - 'gnome-backgrounds'
  - 'gnome-bluetooth'
  - 'gnome-calculator'
  - 'gnome-control-center'
  - 'gnome-dictionary'
  - 'gnome-disk-utility'
  - 'gnome-font-viewer'
  - 'gnome-keyring'
  - 'libpam-gnome-keyring'
  - 'gnome-menus'
  - 'gnome-online-miners'
  - 'gnome-packagekit'
  - 'gnome-screenshot'
  - 'gnome-session'
  - 'gnome-settings-daemon'
  - 'gnome-shell'
  - 'gnome-shell-extensions'
  - 'gnome-system-log'
  - 'gnome-system-monitor'
  - 'gnome-terminal'
  - 'gnome-themes-standard'
  - 'gnome-user-guide'
  - 'gsettings-desktop-schemas'
  - 'gstreamer1.0-plugins-base'
  - 'gstreamer1.0-plugins-good'
  - 'gstreamer1.0-pulseaudio'
  - 'libgtk-3-common'
  - 'gtk2-engines'
  - 'gvfs-backends'
  - 'gvfs-bin'
  - 'gvfs-fuse'
  - 'firefox-esr'
  - 'libcanberra-pulse'
  - 'gkbd-capplet'
  - 'metacity'
  - 'mousetweaks'
  - 'nautilus'
  - 'policykit-1-gnome'
  - 'pulseaudio'
  - 'totem'
  # - 'tracker-gui'
  - 'yelp'
  - 'zenity'

packages__group_wm_gnome_minimal:
  - 'desktop-base'
  - 'xdg-user-dirs-gtk'

packages__group_wm_gnome_additional:
  - 'gnome-clocks'
  - 'gnome-nettool'

packages__group_wm_gnome_power_user:
  - 'gnome-tweak-tool'

packages__group_wm_gnome_basic: |
  {{
    (packages__group_wm_gnome_core_debian_jessie if (
      ansible_distribution|d("") == 'Debian' and
      ansible_distribution_release|d("") == 'jessie'
    ) else [ 'task-gnome-desktop' ]) +
    packages__group_wm_gnome_minimal +
    packages__group_wm_gnome_additional +
    []
  }}

packages__group_wm_gnome_normal: |
  {{
    packages__group_wm_gnome_basic +
    packages__group_wm_gnome_power_user +
    []
  }}

packages__group_wm_gnome_full: |
  {{
    [
      'task-gnome-desktop',
    ] +
    packages__group_wm_gnome_normal +
    []
  }}

# .. ]]]

# Cinnamon desktop environment [[[
# ~~~~~~~~~~~~~~~~~~~~~~~~~~~~

# .. envvar:: packages__group_wm_cinnamon
#
packages__group_wm_cinnamon:
  - 'cinnamon-core'
  - 'xdg-user-dirs-gtk'
  - 'gnome-terminal'
  - 'gnome-screenshot'

# .. ]]]

# MATE desktop environment [[[
# ~~~~~~~~~~~~~~~~~~~~~~~~
#
# https://wiki.debian.org/Mate

# .. envvar:: packages__group_wm_mate
#
packages__group_wm_mate:

  ## Depends on `lightdm`.
  # - 'task-mate-desktop'

  # - 'mate-desktop-environment-core'
  - 'mate-desktop-environment'
  # - 'mate-desktop-environment-extras'

  - 'mate-applets'
  - 'mate-media'
  - 'mate-utils'

  - 'xscreensaver'

  ## Auto select `lightdm` it gdm3 is not selected.
  # - 'lightdm'

# .. ]]]

# LXDE desktop environment [[[
# ~~~~~~~~~~~~~~~~~~~~~~~~
#
# https://wiki.debian.org/LXDE

# .. envvar:: packages__group_wm_lxde
#
packages__group_wm_lxde:
  - 'task-lxde-desktop'

# .. ]]]

# XFCE desktop environment [[[
# ~~~~~~~~~~~~~~~~~~~~~~~~
#
# https://wiki.debian.org/Xfce

# .. envvar:: packages__group_wm_xfce
#
packages__group_wm_xfce:
  - 'task-xfce-desktop'

  ## TODO: Try when in Debian stable.
  # - 'alacritty'

  - 'xfce4-terminal'
  - 'xscreensaver'
  - 'xfce4-notifyd'
  - 'greybird-gtk-theme'
  - 'xfce4-netload-plugin'
  - 'xfce4-timer-plugin'
  - 'xfce4-battery-plugin'
  - 'xfce4-power-manager'
  - 'gnome-power-manager'
  - 'xfce4-pulseaudio-plugin'
  - 'xfce4-sensors-plugin'
  - 'blueman'
  # - 'hddtemp'

# .. ]]]

# Application finder/launcher [[[
# ~~~~~~~~~~~~~~~~~~~~~~~~~~~

packages__group_application_launcher:
  - 'synapse'

  ## Written in Python
  # - 'kupfer'

  # - 'launchy'

  ## Written in C#
  # - 'gnome-do'
  # - 'gmrun'

# .. ]]]

# Time tracking [[[
# ~~~~~~~~~~~~~
#
# `Stack Overflow: Automatic time tracking software for computer work (for Windows/Linux/Mac) <https://productivity.stackexchange.com/questions/13913/automatic-time-tracking-software-for-computer-work-for-windows-linux-mac>`__

packages__group_application_time_tracking:

  ## Recent enough version in Debian Jessie.
  ## Minimalistic. CSV Export.
  ## Seems to be focused on manually starting activates.
  # - 'gtimelog'


  ## Currently not up-to-date in Debian Jessie.
  ## https://github.com/projecthamster/hamster
  ## Tested v2.0-rc1
  ## Seems to be focused on manually starting activates.
  ## CSV, iCAL, HTML export. Can pause on idle.
  ## Can integrate with todo list managers :)
  # - 'hamster'


  ## Recent enough version in Debian Jessie.
  ## Command line based background logger.
  - 'arbtt'


  ## Currently not in Debian.
  ## https://github.com/karpathy/ulogme
  # - 'ulogme'
  ## Dependencies:
  # - 'xinput'
  # - 'xdotool'
  # - 'wmctrl'


  ## Currently not in Debian.
  ## https://github.com/frans-fuerst/track
  ## Checkout at a later time.
  # - 'track'


  ## Currently not in Debian.
  ## https://github.com/gurgeh/selfspy
  ## Best logging and analysis tool I have found.
  - 'selfspy'

# .. ]]]

# Desktop sharing [[[
# ~~~~~~~~~~~~~~~

packages__group_network_remmina:
  - 'vinagre'
  - 'freerdp2-x11'
  - 'remmina'
  - 'remmina-plugin-secret'
  - 'remmina-plugin-nx'
  - 'remmina-plugin-rdp'
  - 'remmina-plugin-telepathy'
  - 'remmina-plugin-vnc'
  - 'remmina-plugin-xdmcp'

  ## Seems to be catching up as of 2015-08.
  ## Problem: https://gettoweb.de/linux/rdesktop-und-credssp-required-by-server/
  ## https://github.com/rdesktop/rdesktop/issues/8
  ## 2019-10: Still very useful to connect to M$ things.
  - 'rdesktop'
  - 'grdesktop'

packages__group_user_desktop_sharing_client:
  - 'x2goclient'

  - 'pyhoca-gui'
  - 'pyhoca-cli'

  ## Totally insecure.
  # - 'gitso'

# Checkout my dedicated role `debops-contrib.x2go_server
# <https://github.com/debops-contrib/ansible-x2go_server>`_
# `x2goserver` is listed here to install some additional packages using the
# :envvar:`packages__conditional` feature.
packages__group_user_desktop_sharing_server:
  - 'x2goserver'

packages__group_user_desktop_sharing_auto: |
  {{
    (packages__group_user_desktop_sharing_server if ("debops_service_x2go_server" in group_names) else []) +
    []
  }}

packages__group_user_desktop_sharing_full: |
  {{
    packages__group_user_desktop_sharing_client +
    packages__group_network_remmina +
    []
  }}

# .. ]]]

# Miscellaneous [[[
# ~~~~~~~~~~~~~

packages__group_user_file_manager:
  - 'nemo'
  - 'nemo-gtkhash'
  - 'nemo-fileroller'

  ## For Android USB file sharing.
  - 'gvfs-backends'

  - 'nautilus'

  - 'doublecmd-qt'
  - 'doublecmd-help-en'

  - 'baobab'
  - 'file-roller'

packages__group_user_text_editor:
  - 'gedit'
  - 'vim-gtk3'

packages__group_user_password_manager:
  - 'keepassx'
  # - 'kpcli'

  ## Sometimes still useful for import or the like.
  ## Donâ€™t install by default to avoid confusion.
  # - 'keepass2'

packages__group_user_optical_media:
  - 'brasero'
  - 'k3b'
  - 'dvd+rw-tools'
  - 'cdrdao'
  - 'qpxtool'

  ## Contains: `geteltorito`
  ## https://wiki.archlinux.org/index.php/Flashing_BIOS_from_Linux
  - 'genisoimage'

packages__group_user_file_cleanup:
  - 'bleachbit'
  - 'fslint'

# `firejail` configuration is handled by a dedicated role.
packages__group_user_compartmentalization:
  - 'firejail'
  - '{{ "firejail-profiles" if (
      ansible_distribution|d("") == "Debian" and
      ansible_distribution_release|d("")|lower != "jessie" and
      packages__apt_preferences__backports_firejail_state | d(packages__apt_preferences__only_available_backports_state)
    ) else "" }}'
  - 'xpra'

packages__group_e2e_testing_basic:
  - 'sikulix'
  - '{{ "python-selenium" if (packages__python2_optional_packages|d() | bool) else "" }}'
  - 'python3-selenium'
  - 'chromium-driver'
  - 'firefoxdriver'

  ## I find SikuliX more suitable. Actiona is not code focused but on GUI
  ## "code" building blocks.
  # - 'actiona'

packages__group_user_additional:
  - 'gucharmap'
  - 'mat'
  - 'unison-gtk'
  - 'nextcloud-desktop'
  - 'seahorse'
  - 'filezilla'
  - 'florence'
  - 'catfish'
  - 'gtkhash'
  - 'grsync'
  - 'autokey-gtk'
  - 'xclip'
  - 'gnome-software'

  - 'cifs-utils'
  - 'smbclient'

  - 'magic-wormhole'

  - 'scrot'
  - 'gtk-redshift'

  - 'cdcat'

  - 'screenkey'
  - 'key-mon'

  - 'gtk-vector-screenshot'
  - 'gnome-screenshot'

packages__group_applied_cryptography_basic:
  - 'signing-party'

packages__group_applied_cryptography_additional:
  - 'hopenpgp-tools'
  - 'pgpdump'

packages__group_network_avahi:
  - 'avahi-discover'
  - 'avahi-utils'

packages__group_network_manager_basic:
  - 'network-manager'

packages__group_network_manager_vpn_plugin:
  - 'network-manager-iodine'
  - 'network-manager-openvpn'
  - 'network-manager-vpnc'

  ## Currently to many dependencies on Debian Stretch.
  # - 'network-manager-ssh'

packages__group_user_basic: |
  {{
    packages__group_user_file_manager +
    packages__group_user_text_editor +
    packages__group_user_password_manager +
    packages__group_user_optical_media +
    (packages__group_user_compartmentalization if ("debops_service_firejail" in group_names) else []) +
    []
  }}

packages__group_user_full: |
  {{
    packages__group_user_basic +
    packages__group_user_file_cleanup +
    packages__group_user_additional +
    packages__group_e2e_testing_basic +
    []
  }}

# .. ]]]

# Automatically added packages [[[
# ~~~~~~~~~~~~~~~~~~~~~~~~~~~~
#
# Complete set of automatically added packages based on other parts of your
# inventory. For example, when the host is also part of the
# `debops_service_x2go_server` host group, some packages might be added
# additionally based on what other packages are installed.

packages__group_auto: |
  {{
    packages__group_user_desktop_sharing_auto +
    []
  }}

# .. ]]]

# .. ]]]

# Class presets [[[
# -----------------

packages__classes_core: |
  {{
    packages__group_core_minimum +
    packages__group_sysadmin_minimal +
    packages__group_auto +
    []
  }}

packages__classes_base: |
  {{
    packages__classes_core +
    packages__group_core_full +
    packages__group_sysadmin_basic +
    packages__group_devel_minimum +
    []
  }}

packages__classes_server: |
  {{
    packages__classes_base +
    []
  }}

    # packages__group_office_minimal +
    # packages__group_multimedia_basic +
packages__classes_live_system: |
  {{
    packages__classes_base +
    packages__group_core_full +
    packages__group_sysadmin_full +
    packages__group_wm_gnome_minimal +
    packages__group_hardware_testing_and_benchmarking_full +
    packages__group_internet_minimum +
    packages__group_education_minimum +
    packages__group_user_basic +
    packages__group_user_terminal_programs_minimum +
    packages__group_firmware_full +
    packages__group_live_system_additional +
    []
  }}

packages__classes_client: |
  {{
    packages__classes_base +
    packages__group_core_full +
    packages__group_sysadmin_basic +
    packages__group_package_management_full +
    packages__group_internet_full +
    packages__group_office_basic +
    packages__group_tag_use_printing +
    packages__group_tag_field_finance_minimum +
    packages__group_user_file_cleanup +
    packages__group_education_basic +
    packages__group_multimedia_basic +
    packages__group_user_full +
    packages__group_user_terminal_programs_minimum +
    packages__group_firmware_full +
    packages__group_tag_admin_virtualization +
    packages__group_network_remmina +
    []
  }}


packages__classes_client_explorer: |
  {{
    packages__classes_client +
    packages__group_tag_game_toys +
    packages__group_tag_field_finance_full +
    packages__group_multimedia_full +
    packages__group_sysadmin_full +
    packages__group_package_management_gui +
    packages__group_network_manager_vpn_plugin +
    packages__group_education_full +
    packages__group_office_full +
    packages__group_devel_basic +
    packages__group_tag_role_documentation +
    packages__group_applied_cryptography_basic +
    packages__group_wm_gnome_power_user +
    packages__group_devel_virtualization_desktop +
    []
  }}


packages__classes_client_school: |
  {{
    packages__classes_client_explorer +
    packages__group_education_games +
    packages__group_education_junior +
    packages__group_office_full +
    packages__group_tag_field_electronics +
    packages__group_devel_full +
    packages__group_tag_devel_lang_python_additional +
    packages__group_database_tools +
    packages__group_user_desktop_sharing_full +
    packages__group_school_additional +
    packages__group_school_additional_dev +
    packages__group_wm_gnome_power_user +
    []
  }}


packages__classes_client_school_linuxmuster: |
  {{
    packages__classes_client_school +
    packages__group_linuxmuster +
    packages__group_school_additional +
    packages__group_school_additional_dev +
    packages__group_school_services +
    []
  }}


packages__classes_server_school: |
  {{
    packages__classes_server +
    packages__group_sysadmin_basic +
    [ "ntfs-3g" ] +
    []
  }}

# .. ]]]

# Classes [[[
# -------

# .. envvar:: packages__additional
#
# Additional packages for all classes indented for use from the global
# inventory.
packages__additional: []


# .. envvar:: packages__group_additional
#
# Additional packages for all classes indented for use from the inventory for
# one host group.
packages__group_additional: []


# .. envvar:: packages__host_additional
#
# Additional packages for all classes intended for use from the host specific
# inventory.
packages__host_additional: []


# .. envvar:: packages__additional_for_class
#
# Additional packages for a class, can be used by inventory variables.
# A use case is the global inventory.
packages__additional_for_class: {}


# .. envvar:: packages__reject_for_class
#
# Although a specific package would be included in the selection for a specific
# class, do not include it for this class. This does not ensure that the
# package is absent. Use ``packages__absent_for_class`` or
# ``packages__rejected_ensure_absent`` if that is what you want.
#
# Refer to :ref:`packages__ref_black_white_listing` if you want to blacklist
# packages regardless of the package class.
#
# Example::
#
#    packages__reject_for_class:
#      container:
#        - 'smartmontools'
#
# .. Donâ€™t overdo it. This feature is currently disabled until it a real need occurs.
# ..
# .. For advanced users: You can also use a regular expression pattern for the class name which is illustrated in the following example::
# ..
# ..    packages__reject_for_class:
# ..      'container.*':
# ..        - 'smartmontools'
# ..
# .. This means that :jinja_code:`smartmontools` will be rejected for ``container`` and ``container_app1`` (everything which the pattern matches).
#
packages__reject_for_class: {}


# .. envvar:: packages__group_reject_for_class
#
packages__group_reject_for_class: {}


# .. envvar:: packages__group_reject_for_class
#
packages__host_reject_for_class: {}


# .. envvar:: packages__preset_reject_for_class
#
packages__preset_reject_for_class:

  # live_system: '{{ packages__reject_for_live_system }}'
  client_school: '{{ packages__reject_for_school }}'
  client_primary_school: '{{ packages__reject_for_primary_school }}'
  client_school_linuxmuster: '{{ packages__reject_for_school }}'


# .. envvar:: packages__reject_for_school
#
# Packages to reject for package classes indented for schools.
# See ``packages__reject_for_class`` for more details.
packages__reject_for_school: |
  {{
    packages__group_network_manager_vpn_plugin +
    packages__group_core_bare_metal_services_not_working_on_all_machines +
    packages__group_network_avahi +
    [ "cheese" ] +
    []
  }}


# .. envvar:: packages__reject_for_primary_school
#
# Packages to reject for package classes indented for primary schools.
# See ``packages__reject_for_class`` for more details.
packages__reject_for_primary_school: |
  {{
    packages__reject_for_school +
    packages__group_internet_additional +
    ["pidgin", "pidgin-latex"]
  }}


# .. envvar:: packages__reject_for_live_system
#
# Packages to reject for package classes indented for live systems.
# See ``packages__reject_for_class`` for more details.
packages__reject_for_live_system: |
  {{
    packages__group_network_manager_vpn_plugin +
    packages__group_core_bare_metal_services_not_working_on_all_machines +
    []
  }}


# .. envvar:: packages__combined_reject_for_class
#
packages__combined_reject_for_class: '{{
  packages__preset_reject_for_class
  | combine(
      packages__reject_for_class,
      packages__group_reject_for_class,
      packages__host_reject_for_class) }}'


# .. envvar:: packages__rejected_ensure_absent
#
# If ``True`` ensure that rejected packages are absent.
packages__rejected_ensure_absent: True


# .. envvar:: packages__absent_for_class
#
# Ensure that the listed packages are absent.
#
# Consider using apt pinning to enforce that those packages will not be
# installed by other means.
# The role debops.apt_preferences_ can be used to achieve this.
packages__absent_for_class: {}


# .. envvar:: packages__absent
#
# Combined list of packages which should be absent. To make packages absent for
# individual classes, checkout ``packages__absent_for_class``.
#
# .. note:: Packages to be absent will be enforced to be absent the same way as
#           rejected packages are, when ``packages__rejected_ensure_absent`` is
#           set to ``True``.
#
packages__absent: |
  {{
    (packages__absent_preset | list) +
    (packages__global_absent | list) +
    (packages__group_absent  | list) +
    (packages__host_absent   | list)
  }}


packages__absent_preset_minimal:
  - 'ddrescue'
  - 'myrescue'
  - 'flashplugin-nonfree'
  - 'browser-plugin-freshplayer-pepperflash'
  - 'pidgin-openpgp'
  - 'lat'
  - 'msmtp'
  - 'ding'
  - 'minitube'
  - 'smtube'
  - 'ack-grep'
  - 'memtest86'
  - 'kupfer'
  - 'launchy'
  - 'gnome-do'
  - 'gmrun'
  - 'gitso'
  - 'frogr'
  - 'frogr-data'
  - 'iceweasel'
  - 'owncloud-client'
  - 'virtualbox'
  - 'virtualbox-dkms'
  - 'virtualbox-qt'
  - 'virtualbox-guest-additions-iso'
  - 'net-tools'

  ## Nothing against it but the new default is digikam:
  - 'shotwell'

  ## Is superseded by `tmux` but donâ€™t automatically ensure absence `screen` by this preset:
  # - 'screen'

  ## Not yet ensure absent.
  # - 'gnome-dictionary'


  ## Limited security support:
  # - 'libqt5webkit5'
  # - 'qtwebkit5-doc-html'
  ## Removing this also removes: calibre qtcreator stellarium

  - 'apt-show-versions'

  ## Currently broken and prevents security upgrade of Thunderbird.
  ## Ref: https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=945061
  - 'xul-ext-sogo-connector'


# Shipping the documentation using the package manager is a nice idea, but for
# servers (without a graphical interface), it is pointless.
# Normally, distribution dependent package selection is implemented using the ../vars/ files, but here we make an exception so that we donâ€™t have to blacklist those SLES specific for every other distribution.
packages__absent_preset_sles:
  - 'sles-admin_en-pdf'
  - 'sles-deployment_en-pdf'
  - 'sles-security_en-pdf'
  - 'sles-storage_en-pdf'
  - 'sles-tuning_en-pdf'


# .. envvar:: packages__absent_preset
#
# Preset list of packages to be absent. The packages listed here have been
# replaced/superseded by better suited packages as decided by the role
# maintainers.
packages__absent_preset: |
  {{
    packages__absent_preset_minimal +
    (packages__absent_preset_sles if ('sles' == (ansible_distribution|d(omit)|lower)) else []) +
    []
  }}

# .. envvar:: packages__global_absent
#
# Global absented packages.
# This variable is intended to be used in Ansibleâ€™s global inventory.
# More specific variables can overrule less specific variables.
packages__global_absent: []


# .. envvar:: packages__group_absent
#
# Host group absented packages.
# This variable is intended to be used in a host inventory group of Ansible
# (only one host group is supported).
packages__group_absent: []


# .. envvar:: packages__host_absent
#
# Host absented packages.
# This variable is intended to be used in the inventory of the host.
packages__host_absent: []


# .. envvar:: packages__classes
#
# Global dict of available classes mapping to all packages of the class.
packages__classes:

  core: |
    {{
      packages__classes_core +
      (packages__additional_for_class.core|d([])) +
      []
    }}

  base: |
    {{
      packages__classes_base +
      (packages__additional_for_class.base|d([])) +
      []
    }}

  server: |
    {{
      packages__classes_server +
      (packages__additional_for_class.server|d([])) +
      []
    }}

  server_school: |
    {{
      packages__classes_server_school +
      (packages__additional_for_class.server_school|d([])) +
      []
    }}

  android: |
    {{
      packages__classes_client +
      packages__group_devel_basic +
      packages__group_typesetting_minimal +
      packages__group_tag_works_with_archive_full +
      packages__group_tag_game_toys +
      (packages__additional_for_class.client|d([])) +
      []
    }}

  live_system: |
    {{
      packages__classes_live_system +
      packages__group_wm_gnome_minimal +
      packages__group_network_manager_basic +
      (packages__additional_for_class.live_system|d([])) +
      []
    }}

  client: |
    {{
      packages__classes_client +
      packages__group_wm_cinnamon +
      packages__group_wm_mate +
      packages__group_network_manager_basic +
      packages__group_tag_game +
      (packages__additional_for_class.client|d([])) +
      []
    }}

  client_explorer: |
    {{
      packages__classes_client_explorer +
      packages__group_wm_gnome_normal +
      packages__group_wm_cinnamon +
      packages__group_wm_mate +
      packages__group_network_manager_basic +
      packages__group_networking_analysis_minimum +
      packages__group_tag_game +
      (packages__additional_for_class.client_explorer|d([])) +
      []
    }}

  client_school: |
    {{
      packages__classes_client_school +
      packages__group_wm_cinnamon +
      packages__group_wm_mate +
      packages__group_network_manager_basic +
      (packages__additional_for_class.client_school|d([])) +
      []
    }}

  client_primary_school: |
    {{
      packages__classes_client_school +
      packages__group_wm_cinnamon +
      packages__group_wm_mate +
      packages__group_network_manager_basic +
      (packages__additional_for_class.client_primary_school|d([])) +
      []
    }}

  client_school_linuxmuster: |
    {{
      packages__classes_client_school_linuxmuster +
      packages__group_wm_cinnamon +
      packages__group_network_manager_basic +
      (packages__additional_for_class.client_school_linuxmuster|d([])) +
      []
    }}


# .. envvar:: packages__classes_additional
#
# Additional class to packages mappings.
# Allows you to add more classes from your Ansible inventory.
packages__classes_additional: {}

# .. ]]]

# .. Role maintainer helpers [[[
# .. Vim search/replace to add quotes: :%s/\v^(  - )(\w.*)$/\1'\2'/g
# .. ]]]
